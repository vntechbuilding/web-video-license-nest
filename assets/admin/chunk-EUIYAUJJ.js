import{a as ae,b as j}from"./chunk-UVZ7OHOK.js";import{a as Ue}from"./chunk-ON5W3XZ3.js";import{a as ne}from"./chunk-HUONOAPD.js";import{a as U,b as je,c as He}from"./chunk-W244JUTK.js";import"./chunk-5TKBH2EH.js";import{a as We}from"./chunk-SLOIDIPU.js";import{d as oe}from"./chunk-AB36JMP2.js";import"./chunk-7XZ66E5Q.js";import{a as Pe}from"./chunk-ASNUN4YP.js";import{a as Le,b as Re}from"./chunk-YANWLB2B.js";import{a as R,b as Ge,d as re,e as te,h as ie,j as Be,k as xe,l as qe,m as Ae,n as Xe,o as ke,p as Oe}from"./chunk-CIAYRUPY.js";import"./chunk-OC6OS4EK.js";import{a as B,b as x,c as q,m as A,n as $,o as X,p as k,q as O,r as ee,t as L}from"./chunk-53LNINAL.js";import"./chunk-PUH3HP37.js";import{a as Te,d as Y,e as d,g as b,h as N,l as D,n as T,o as I,p as Ie,r as Z,s as V,t as w,u as W,w as G,x as P}from"./chunk-TEFF5QW5.js";import{Ba as fe,E as Ve,F as we}from"./chunk-E7AKRIK7.js";import"./chunk-SE4MWOQF.js";import"./chunk-3D2PYGCY.js";import{Ea as H,Fa as J,Kb as r,Lb as t,Ma as ve,Mb as f,Nb as Me,Ob as Ce,Qb as de,Sc as Fe,Tb as c,Tc as be,Vb as F,Zb as se,Zc as Ne,_c as De,a as he,b as ge,bd as y,cb as le,cc as Se,dc as p,ec as h,gb as o,ha as Ee,hb as C,hc as g,ic as E,jc as v,kc as _e,lc as _,mc as K,pc as Q,qc as ye,rb as S,rc as ue,ta as M,wb as pe,yb as i}from"./chunk-KXMLQHF5.js";var me=(()=>{let l=class l extends Pe{constructor(a){super(),this.fb=a,this.duration=new ve,this.durationField="duration",this.label="Th\u1EDDi l\u01B0\u1EE3ng"}ngOnInit(){this.addControl(this.durationField,this.validators[this.durationField]),this.durationSubscription=this.formGroup.get(this.durationField)?.valueChanges.subscribe(n=>this.duration.emit(n)),this.form=this.fb.group({hours:[0,[d.required,d.min(0)]],minutes:[0,[d.required,d.min(0),d.max(59)]],seconds:[0,[d.required,d.min(0),d.max(59)]]});let a=this.defaultValue[this.durationField];a&&this.writeValue(a),this.form.valueChanges.subscribe(n=>{if(this.form.valid){let e=`PT${n.hours?n.hours+"H":""}${n.minutes?n.minutes+"M":""}${n.seconds}S`;this.formGroup.get(this.durationField)?.setValue(e)}})}ngOnDestroy(){this.durationSubscription&&this.durationSubscription.unsubscribe()}writeValue(a){if(a){let n=a.match(/PT(\d+)H(\d+)M(\d+)S/);if(n)this.form.setValue({hours:n[1],minutes:n[2],seconds:n[3]},{emitEvent:!1});else{let e=a.match(/PT(\d+)M(\d+)S/);e&&this.form.setValue({hours:0,minutes:e[1],seconds:e[2]},{emitEvent:!1})}}}};l.\u0275fac=function(n){return new(n||l)(C(Ie))},l.\u0275cmp=M({type:l,selectors:[["app-duration-input"]],inputs:{durationField:"durationField",label:"label"},outputs:{duration:"duration"},standalone:!0,features:[_e([{provide:Te,useExisting:Ee(()=>l),multi:!0}]),S,_],decls:16,vars:18,consts:[[3,"formGroup"],[3,"nzSm","nzXs","nzFor"],[3,"nzSm","nzXs","nzErrorTip"],["nz-row","","nzGutter","15"],["nz-col","","nzSpan","8"],["nzAddOnBefore","Gi\u1EDD"],["formControlName","hours",3,"nzStep","nzMin","nzMax"],["nzAddOnBefore","Ph\xFAt"],["formControlName","minutes",3,"nzStep","nzMin","nzMax"],["nzAddOnBefore","Gi\xE2y"],["formControlName","seconds",3,"nzStep","nzMin","nzMax"]],template:function(n,e){n&1&&(r(0,"div",0)(1,"nz-form-item")(2,"nz-form-label",1),p(3),t(),r(4,"nz-form-control",2)(5,"form",0)(6,"div",3)(7,"div",4)(8,"nz-input-number-group",5),f(9,"nz-input-number",6),t()(),r(10,"div",4)(11,"nz-input-number-group",7),f(12,"nz-input-number",8),t()(),r(13,"div",4)(14,"nz-input-number-group",9),f(15,"nz-input-number",10),t()()()()()()()),n&2&&(i("formGroup",e.formGroup),o(2),i("nzSm",10)("nzXs",24)("nzFor",e.durationField),o(),h(e.label),o(),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors[e.durationField]),o(),i("formGroup",e.form),o(4),i("nzStep",1)("nzMin",0)("nzMax",23),o(3),i("nzStep",1)("nzMin",0)("nzMax",59),o(3),i("nzStep",1)("nzMin",0)("nzMax",59))},dependencies:[O,x,B,A,k,X,q,V,D,b,N,T,I,Z,L,y,He,U,je]});let s=l;return s})();var ce=()=>({}),rr=(()=>{let l=class l extends R(re,te){constructor(a){super(),this.video=a,this.selectedFile=null,this._formErrorMsg={userId:{required:"User kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},name:{required:"T\xEAn video kh\xF4ng h\u1EE3p l\u1EC7"},description:{required:"M\xF4 t\u1EA3 kh\xF4ng h\u1EE3p l\u1EC7"},duration:{required:"Th\u1EDDi l\u01B0\u1EE3ng kh\xF4ng h\u1EE3p l\u1EC7"},totalWatch:{required:"L\u01B0\u1EE3t xem kh\xF4ng h\u1EE3p l\u1EC7"},uploadDate:{required:"Ng\xE0y t\u1EA3i l\xEAn kh\xF4ng h\u1EE3p l\u1EC7"}}}ngOnInit(){this.validateForm=this.fb.group({name:["",[d.required]],description:["",[d.required]],duration:["",[d.required]],totalWatch:[0,[d.required]],uploadDate:["",[d.required]],videoFile:["",[d.required]]})}onFileChange(a){a.target.files.length>0&&(this.selectedFile=a.target.files[0])}submitForm(){if(this.formValid()){let a=new FormData,n=this.removeBlankString(this.validateForm.value);for(let m in n)m!=="videoFile"&&m!=="uploadDate"&&a.append(m,n[m]);let z=new Date(n.uploadDate).toISOString();a.append("uploadDate",z),this.selectedFile&&a.append("file",this.selectedFile),this.video.createVideo(a).pipe(this.httpErrorOperator("author")).subscribe(m=>{this.destroyModal(m)})}}};l.\u0275fac=function(n){return new(n||l)(C(j))},l.\u0275cmp=M({type:l,selectors:[["app-video-create"]],standalone:!0,features:[S,_],decls:29,vars:51,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","description",3,"nzSm","nzXs"],["nz-input","","formControlName","description","id","description"],["nzRequired","","nzFor","videoFile",3,"nzSm","nzXs"],["type","file","nz-input","","formControlName","videoFile","accept",".mp4",3,"change"],[3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","label","defaultField","aspectRatio"],["nzFor","totalWatch",3,"nzSm","nzXs"],["formControlName","totalWatch",3,"nzMin","nzMax"],[3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","defaultValue"],["label","Ng\xE0y t\u1EA3i l\xEAn","dateField","uploadDate",3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","defaultValue"],["label","Th\u1EDDi l\u01B0\u1EE3ng video","durationField","duration",3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","defaultValue"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(n,e){n&1&&(r(0,"form",0),c("ngSubmit",function(){return e.submitForm()}),r(1,"nz-form-item")(2,"nz-form-label",1),p(3,"T\xEAn video"),t(),r(4,"nz-form-control",2),f(5,"input",3),t()(),r(6,"nz-form-item")(7,"nz-form-label",4),p(8,"M\xF4 t\u1EA3"),t(),r(9,"nz-form-control",2),f(10,"input",5),t()(),r(11,"nz-form-item")(12,"nz-form-label",6),p(13,"File mp4"),t(),r(14,"nz-form-control",2)(15,"input",7),c("change",function(m){return e.onFileChange(m)}),t()()(),r(16,"app-content-image-input",8),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(17,"nz-form-item")(18,"nz-form-label",9),p(19,"L\u01B0\u1EE3t xem"),t(),r(20,"nz-form-control",2),f(21,"nz-input-number",10),t()(),r(22,"app-user-id-input",11),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(23,"app-date-input",12),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(24,"app-duration-input",13),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(25,"nz-form-item",14)(26,"nz-form-control",15)(27,"button",16),p(28,"T\u1EA1o Video"),t()()()()),n&2&&(i("formGroup",e.validateForm),o(2),i("nzSm",10)("nzXs",24),o(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.name),o(3),i("nzSm",10)("nzXs",24),o(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.description),o(3),i("nzSm",10)("nzXs",24),o(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.videoFile),o(2),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("label","Thumbnail")("defaultField","thumbnail")("aspectRatio",16/9),o(2),i("nzSm",10)("nzXs",24),o(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.totalWatch),o(),i("nzMin",0)("nzMax",999999),o(),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("defaultValue",K(48,ce)),o(),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("defaultValue",K(49,ce)),o(),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("defaultValue",K(50,ce)),o(2),i("nzSpan",12)("nzOffset",8),o(),i("disabled",!e.validateForm.valid))},dependencies:[O,x,B,$,A,k,X,q,P,G,w,W,L,ee,V,D,Y,b,N,T,I,ie,y,oe,U,ne,ae,me]});let s=l;return s})();var tr=(()=>{let l=class l extends R(re,te){constructor(a){super(),this.video=a,this._formErrorMsg={userId:{required:"User kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},name:{required:"T\xEAn video kh\xF4ng h\u1EE3p l\u1EC7"},description:{required:"M\xF4 t\u1EA3 kh\xF4ng h\u1EE3p l\u1EC7"},duration:{required:"Th\u1EDDi l\u01B0\u1EE3ng kh\xF4ng h\u1EE3p l\u1EC7"},totalWatch:{required:"L\u01B0\u1EE3t xem kh\xF4ng h\u1EE3p l\u1EC7"},uploadDate:{required:"Ng\xE0y t\u1EA3i l\xEAn kh\xF4ng h\u1EE3p l\u1EC7"}}}ngOnInit(){this.validateForm=this.fb.group({name:[this.nzModalData.name,[d.required]],description:[this.nzModalData.description,[d.required]],duration:[this.nzModalData.duration,[d.required]],totalWatch:[this.nzModalData.totalWatch,[d.required]],uploadDate:[this.nzModalData.uploadDate,[d.required]]})}submitForm(){this.formValid()&&this.video.updateVideo(ge(he({},this.removeBlankString(this.validateForm.value)),{videoId:this.nzModalData.id})).pipe(this.httpErrorOperator("author")).subscribe(a=>{this.destroyModal(a)})}};l.\u0275fac=function(n){return new(n||l)(C(j))},l.\u0275cmp=M({type:l,selectors:[["app-video-edit"]],standalone:!0,features:[S,_],decls:24,vars:43,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","description",3,"nzSm","nzXs"],["nz-input","","formControlName","description","id","description"],[3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","label","defaultField","aspectRatio"],["nzFor","totalWatch",3,"nzSm","nzXs"],["formControlName","totalWatch",3,"nzMin","nzMax"],[3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","defaultValue"],["label","Ng\xE0y t\u1EA3i l\xEAn","dateField","uploadDate",3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","defaultValue"],["label","Th\u1EDDi l\u01B0\u1EE3ng video","durationField","duration",3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","defaultValue"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(n,e){n&1&&(r(0,"form",0),c("ngSubmit",function(){return e.submitForm()}),r(1,"nz-form-item")(2,"nz-form-label",1),p(3,"T\xEAn video"),t(),r(4,"nz-form-control",2),f(5,"input",3),t()(),r(6,"nz-form-item")(7,"nz-form-label",4),p(8,"M\xF4 t\u1EA3"),t(),r(9,"nz-form-control",2),f(10,"input",5),t()(),r(11,"app-content-image-input",6),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(12,"nz-form-item")(13,"nz-form-label",7),p(14,"L\u01B0\u1EE3t xem"),t(),r(15,"nz-form-control",2),f(16,"nz-input-number",8),t()(),r(17,"app-user-id-input",9),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(18,"app-date-input",10),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(19,"app-duration-input",11),v("formErrorMsgChange",function(m){return E(e.formErrorMsg,m)||(e.formErrorMsg=m),m}),t(),r(20,"nz-form-item",12)(21,"nz-form-control",13)(22,"button",14),p(23,"C\u1EADp nh\u1EADt Video"),t()()()()),n&2&&(i("formGroup",e.validateForm),o(2),i("nzSm",10)("nzXs",24),o(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.name),o(3),i("nzSm",10)("nzXs",24),o(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.description),o(2),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("label","Thumbnail")("defaultField","thumbnail")("aspectRatio",16/9),o(2),i("nzSm",10)("nzXs",24),o(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.totalWatch),o(),i("nzMin",0)("nzMax",999999),o(),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("defaultValue",e.nzModalData),o(),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("defaultValue",e.nzModalData),o(),i("validators",e.validators),g("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("defaultValue",e.nzModalData),o(2),i("nzSpan",12)("nzOffset",8),o(),i("disabled",!e.validateForm.valid))},dependencies:[O,x,B,$,A,k,X,q,P,G,w,W,L,ee,V,D,Y,b,N,T,I,ie,y,oe,U,ne,ae,me]});let s=l;return s})();function or(s,l){if(s&1){let u=de();r(0,"tr")(1,"td"),p(2),Q(3,"date"),t(),r(4,"td"),p(5),Q(6,"date"),t(),r(7,"td"),p(8),t(),r(9,"td"),p(10),t(),r(11,"td")(12,"a",9),f(13,"img",10),t()(),r(14,"td"),p(15),t(),r(16,"td"),p(17),t(),r(18,"td"),p(19),t(),r(20,"td")(21,"button",11),c("click",function(){let n=H(u).$implicit,e=F(2);return J(e.edit(n))}),p(22,"S\u1EEDa"),t(),r(23,"button",12),c("nzOnConfirm",function(){let n=H(u).$implicit,e=F(2);return J(e.delete(n))}),p(24,"X\xF3a"),t()()()}if(s&2){let u=l.$implicit,a=F(2);o(2),h(ue(3,13,u.createdAt,"dd/MM/yyyy hh:mm")),o(3),h(ue(6,16,u.uploadDate,"dd/MM/yyyy hh:mm:ss")),o(3),h(u.name),o(2),h(u.description),o(2),se("href","",a.videoUploadPath,"",u.file,"",le),o(),se("src","",a.imageUploadPath,"",u.thumbnail,"",le),o(2),h(u.duration),o(2),h(u.totalWatch),o(2),h(u.user==null?null:u.user.fullName)}}function nr(s,l){if(s&1){let u=de();Me(0),r(1,"nz-table",4,0),c("nzPageIndexChange",function(n){H(u);let e=F();return J(e.changePage(n))}),r(3,"thead")(4,"tr")(5,"th"),p(6,"Th\u01A1\u0300i gian kh\u1EDFi t\u1EA1o"),t(),r(7,"th"),p(8,"Th\u01A1\u0300i gian T\u1EA3i l\xEAn"),t(),r(9,"th"),p(10,"Name"),t(),r(11,"th"),p(12,"Description"),t(),r(13,"th"),p(14,"Video"),t(),r(15,"th"),p(16,"Duration"),t(),r(17,"th"),p(18,"L\u01B0\u1EE3t xem"),t(),r(19,"th"),p(20,"User"),t(),r(21,"th"),p(22,"X\u1EED l\xFD"),t()(),r(23,"tr")(24,"th",5)(25,"button",6),c("click",function(){H(u);let n=F();return J(n.create())}),f(26,"span",7),t()()()(),r(27,"tbody"),pe(28,or,25,19,"tr",8),t()(),Ce()}if(s&2){let u=l.ngIf,a=Se(2),n=F();o(),i("nzData",u.data)("nzTotal",u.count)("nzPageIndex",n.pageIndex+1)("nzPageSize",n.pageSize),o(27),i("ngForOf",a.data)}}var ct=(()=>{let l=class l extends R(Ge,We){constructor(a){super(),this.videoService=a,this.videoUploadPath=fe.videoUploadPath,this.imageUploadPath=fe.uploadMetaImageThumbnailUrl,this.video$=this.createObservableData((n,e)=>this.filter&&this.filter.userId?this.videoService.getAllUserVideo(this.filter.userId,n,e):this.videoService.getAllVideo(n,e))}filterData(a){this.filter=a,this.loadDataSubject$.next(!0)}create(){this.createComponentModal({nzTitle:"T\u1EA1o video",nzWidth:"100vw"},rr).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}edit(a){this.createComponentModal({nzTitle:"C\u1EADp nh\u1EADt video "+a.name,nzWidth:"100vw"},tr,a).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}delete(a){this.videoService.deleteVideo(a.id).subscribe(()=>this.loadDataSubject$.next(!0))}};l.\u0275fac=function(n){return new(n||l)(C(j))},l.\u0275cmp=M({type:l,selectors:[["app-video-index"]],standalone:!0,features:[S,_],decls:4,vars:4,consts:[["publisherTable",""],[1,"mb-2"],[3,"filter","domainInput"],[4,"ngIf"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzPageIndexChange","nzData","nzTotal","nzPageIndex","nzPageSize"],["colspan","9",1,"center-align"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","T\u1EA1o publisher",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],["alt","",2,"height","50px",3,"src"],["nz-button","","nzType","primary","nzSize","small",1,"mr1",3,"click"],["nz-button","","nzDanger","","nzType","primary","nzSize","small","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this task?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"]],template:function(n,e){n&1&&(r(0,"div",1)(1,"app-user-domain-filter",2),c("filter",function(m){return e.filterData(m)}),t()(),pe(2,nr,29,5,"ng-container",3),Q(3,"async")),n&2&&(o(),i("domainInput",!1),o(),i("ngIf",ye(3,2,e.video$)))},dependencies:[Ue,Oe,Ae,Be,xe,ke,qe,Xe,P,G,w,W,y,Fe,be,Ne,De,Z,Re,Le,we,Ve]});let s=l;return s})();export{ct as VideoIndexComponent};
