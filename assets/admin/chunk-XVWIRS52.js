import{a as le}from"./chunk-W244JUTK.js";import{a as Me}from"./chunk-6YSGIGXK.js";import"./chunk-HHG4OQGC.js";import{a as Re,b as qe}from"./chunk-YANWLB2B.js";import{a as L,b as Oe,d as P,e as pe,f as $,g as B,h as k,j as Ie,k as xe,l as Xe,m as Ae,n as we,o as Ve,p as Ge}from"./chunk-CIAYRUPY.js";import"./chunk-OC6OS4EK.js";import{a as x,b as X,c as A,m as w,n as V,o as G,p as R,q,r as me,t as j}from"./chunk-53LNINAL.js";import"./chunk-PUH3HP37.js";import{d as ae,e as z,g as C,h as N,l as b,n as g,o as D,r as De,s as F,t as _,u as O,w as M,x as I}from"./chunk-TEFF5QW5.js";import{Ba as Y,E as Fe,F as _e}from"./chunk-E7AKRIK7.js";import"./chunk-SE4MWOQF.js";import{b as ge}from"./chunk-3D2PYGCY.js";import{$c as be,Ea as ee,Fa as te,Kb as i,Lb as n,Ma as Ne,Mb as d,N as ve,Nb as ie,Ob as ne,Qb as ue,Sc as y,Tb as u,Tc as re,Vb as W,Zc as oe,a as K,b as Q,ba as ye,bd as h,dc as l,ea as Z,ec as T,gb as t,hb as S,ia as he,lc as v,m as Te,na as Ce,pc as U,qc as H,rb as E,ta as c,wb as f,yb as e}from"./chunk-KXMLQHF5.js";var de={DEFAULT:"DEFAULT",HOME:"HOME",NEWS:"NEWS",PAGE:"PAGE",ARTICLE:"ARTICLE"},ze={NEWS:"NEWS",NEWS_CATEGORY:"NEWS_CATEGORY",PAGE:"PAGE",MENU:"MENU",TEXT:"TEXT",SCRIPT:"SCRIPT",IMAGE:"IMAGE",CONTENT:"CONTENT"},J=(()=>{let o=class o{constructor(r){this.http=r}getAllTemplateData(r){return this.http.get(Y.apiUrl+`template-data/${r}`)}createTemplateData(r){return this.http.post(Y.apiUrl+"template-data",r)}updateTemplateData(r){return this.http.put(Y.apiUrl+"template-data",r)}deleteTemplateData(r){return this.http.delete(Y.apiUrl+`template-data/${r}`)}};o.\u0275fac=function(p){return new(p||o)(Ce(ge))},o.\u0275prov=he({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var fe={NEWS:JSON.stringify({},null,2),NEWS_CATEGORY:JSON.stringify({take:5},null,2),PAGE:JSON.stringify({},null,2),MENU:JSON.stringify({},null,2),TEXT:JSON.stringify({},null,2),SCRIPT:JSON.stringify({},null,2),IMAGE:JSON.stringify({width:100,height:100},null,2),CONTENT:JSON.stringify({},null,2)};function Qe(a,o){if(a&1&&d(0,"nz-option",20),a&2){let s=o.$implicit;e("nzValue",s)("nzLabel",s)}}function Ze(a,o){if(a&1&&d(0,"nz-option",20),a&2){let s=o.$implicit;e("nzValue",s)("nzLabel",s)}}var We=(()=>{let o=class o extends L(P,pe){constructor(r){super(),this.templateDataService=r,this.templateType=Object.keys(de),this.dataType=Object.keys(ze)}ngOnInit(){this.validateForm=this.fb.group({template:[{value:this.nzModalData.name,disabled:!0}],templateType:["",[z.required]],name:["",[z.required]],dataType:["",[z.required]],code:["",[z.required]],config:["{}",[z.required]],sortOrder:["",[z.required]]}),this.dataTypeSubscription=this.validateForm.get("dataType")?.valueChanges.subscribe(r=>{this.validateForm.get("config")?.setValue(fe[r]||JSON.stringify({}))})}onDestroy(){this.dataTypeSubscription&&this.dataTypeSubscription.unsubscribe()}submitForm(){this.formValid()&&this.templateDataService.createTemplateData(Q(K({},this.removeBlankString(this.validateForm.value)),{templateId:this.nzModalData.id})).pipe(this.httpErrorOperator("name")).subscribe(r=>{this.destroyModal(r)})}};o.\u0275fac=function(p){return new(p||o)(S(J))},o.\u0275cmp=c({type:o,selectors:[["app-template-data-create"]],standalone:!0,features:[E,v],decls:42,vars:43,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","template",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","template","id","template"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","code",3,"nzSm","nzXs"],["nz-input","","formControlName","code","id","code"],["nzRequired","","nzFor","templateType",3,"nzSm","nzXs"],["formControlName","templateType","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","dataType",3,"nzSm","nzXs"],["formControlName","dataType","nzShowSearch",""],["nzRequired","","nzFor","config",3,"nzSm","nzXs"],["rows","10","nz-input","","formControlName","config","id","config"],["nzRequired","","nzFor","sortOrder",3,"nzSm","nzXs"],["formControlName","sortOrder",3,"nzMin","nzMax"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],[3,"nzValue","nzLabel"]],template:function(p,m){p&1&&(i(0,"form",0),u("ngSubmit",function(){return m.submitForm()}),i(1,"nz-form-item")(2,"nz-form-label",1),l(3,"Giao di\u1EC7n"),n(),i(4,"nz-form-control",2),d(5,"input",3),n()(),i(6,"nz-form-item")(7,"nz-form-label",4),l(8,"D\u1EEF li\u1EC7u"),n(),i(9,"nz-form-control",2),d(10,"input",5),n()(),i(11,"nz-form-item")(12,"nz-form-label",6),l(13,"Code"),n(),i(14,"nz-form-control",2),d(15,"input",7),n()(),i(16,"nz-form-item")(17,"nz-form-label",8),l(18,"Trang c\u1EA5u h\xECnh"),n(),i(19,"nz-form-control",2)(20,"nz-select",9),f(21,Qe,1,2,"nz-option",10),n()()(),i(22,"nz-form-item")(23,"nz-form-label",11),l(24,"Lo\u1EA1i d\u1EEF li\u1EC7u"),n(),i(25,"nz-form-control",2)(26,"nz-select",12),f(27,Ze,1,2,"nz-option",10),n()()(),i(28,"nz-form-item")(29,"nz-form-label",13),l(30,"Config"),n(),i(31,"nz-form-control",2),d(32,"textarea",14),n()(),i(33,"nz-form-item")(34,"nz-form-label",15),l(35,"Th\u1EE9 t\u1EF1"),n(),i(36,"nz-form-control",2),d(37,"nz-input-number",16),n()(),i(38,"nz-form-item",17)(39,"nz-form-control",18)(40,"button",19),l(41,"T\u1EA1o d\u1EEF li\u1EC7u giao di\u1EC7n"),n()()()()),p&2&&(e("formGroup",m.validateForm),t(2),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.template),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.name),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.code),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.templateType),t(2),e("ngForOf",m.templateType),t(2),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.dataType),t(2),e("ngForOf",m.dataType),t(2),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.config),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.sortOrder),t(),e("nzMin",0)("nzMax",999999),t(2),e("nzSpan",12)("nzOffset",8),t(),e("disabled",!m.validateForm.valid))},dependencies:[q,X,x,V,w,R,G,A,I,M,_,O,j,me,F,b,ae,C,N,g,D,k,$,B,h,y,le]});let a=o;return a})();function et(a,o){if(a&1&&d(0,"nz-option",20),a&2){let s=o.$implicit;e("nzValue",s)("nzLabel",s)}}function tt(a,o){if(a&1&&d(0,"nz-option",20),a&2){let s=o.$implicit;e("nzValue",s)("nzLabel",s)}}var Ue=(()=>{let o=class o extends L(P,pe){constructor(r){super(),this.templateDataService=r,this.templateType=Object.keys(de),this.dataType=Object.keys(ze)}ngOnInit(){this.validateForm=this.fb.group({template:[{value:this.nzModalData.template?.name,disabled:!0}],templateType:[this.nzModalData.templateType,[z.required]],name:[this.nzModalData.name,[z.required]],dataType:[this.nzModalData.dataType,[z.required]],code:[this.nzModalData.code,[z.required]],config:[JSON.stringify(this.nzModalData.config,null,2),[z.required]],sortOrder:[this.nzModalData.sortOrder,[z.required]]}),this.dataTypeSubscription=this.validateForm.get("dataType")?.valueChanges.subscribe(r=>{this.validateForm.get("config")?.setValue(fe[r]||JSON.stringify({}))})}onDestroy(){this.dataTypeSubscription&&this.dataTypeSubscription.unsubscribe()}submitForm(){this.formValid()&&this.templateDataService.updateTemplateData(Q(K({},this.removeBlankString(this.validateForm.value)),{templateId:this.nzModalData.templateId,templateDataId:this.nzModalData.id})).pipe(this.httpErrorOperator("name")).subscribe(r=>{this.destroyModal(r)})}};o.\u0275fac=function(p){return new(p||o)(S(J))},o.\u0275cmp=c({type:o,selectors:[["app-template-data-edit"]],standalone:!0,features:[E,v],decls:42,vars:43,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","template",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","template","id","template"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","code",3,"nzSm","nzXs"],["nz-input","","formControlName","code","id","code"],["nzRequired","","nzFor","templateType",3,"nzSm","nzXs"],["formControlName","templateType","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","dataType",3,"nzSm","nzXs"],["formControlName","dataType","nzShowSearch",""],["nzRequired","","nzFor","config",3,"nzSm","nzXs"],["rows","10","nz-input","","formControlName","config","id","config"],["nzRequired","","nzFor","sortOrder",3,"nzSm","nzXs"],["formControlName","sortOrder",3,"nzMin","nzMax"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],[3,"nzValue","nzLabel"]],template:function(p,m){p&1&&(i(0,"form",0),u("ngSubmit",function(){return m.submitForm()}),i(1,"nz-form-item")(2,"nz-form-label",1),l(3,"Giao di\u1EC7n"),n(),i(4,"nz-form-control",2),d(5,"input",3),n()(),i(6,"nz-form-item")(7,"nz-form-label",4),l(8,"D\u1EEF li\u1EC7u"),n(),i(9,"nz-form-control",2),d(10,"input",5),n()(),i(11,"nz-form-item")(12,"nz-form-label",6),l(13,"Code"),n(),i(14,"nz-form-control",2),d(15,"input",7),n()(),i(16,"nz-form-item")(17,"nz-form-label",8),l(18,"Trang c\u1EA5u h\xECnh"),n(),i(19,"nz-form-control",2)(20,"nz-select",9),f(21,et,1,2,"nz-option",10),n()()(),i(22,"nz-form-item")(23,"nz-form-label",11),l(24,"Lo\u1EA1i d\u1EEF li\u1EC7u"),n(),i(25,"nz-form-control",2)(26,"nz-select",12),f(27,tt,1,2,"nz-option",10),n()()(),i(28,"nz-form-item")(29,"nz-form-label",13),l(30,"Config"),n(),i(31,"nz-form-control",2),d(32,"textarea",14),n()(),i(33,"nz-form-item")(34,"nz-form-label",15),l(35,"Th\u1EE9 t\u1EF1"),n(),i(36,"nz-form-control",2),d(37,"nz-input-number",16),n()(),i(38,"nz-form-item",17)(39,"nz-form-control",18)(40,"button",19),l(41,"C\u1EADp nh\u1EADt d\u1EEF li\u1EC7u giao di\u1EC7n"),n()()()()),p&2&&(e("formGroup",m.validateForm),t(2),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.template),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.name),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.code),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.templateType),t(2),e("ngForOf",m.templateType),t(2),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.dataType),t(2),e("ngForOf",m.dataType),t(2),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.config),t(3),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.sortOrder),t(),e("nzMin",0)("nzMax",999999),t(2),e("nzSpan",12)("nzOffset",8),t(),e("disabled",!m.validateForm.valid))},dependencies:[q,X,x,V,w,R,G,A,I,M,_,O,j,me,F,b,ae,C,N,g,D,k,$,B,h,y,le]});let a=o;return a})();function it(a,o){if(a&1&&d(0,"nz-option",8),a&2){let s=o.$implicit;e("nzValue",s.id)("nzLabel",s.name)}}function nt(a,o){if(a&1&&(ie(0),f(1,it,1,2,"nz-option",7),ne()),a&2){let s=o.$implicit;t(),e("ngForOf",s.data)}}var He=(()=>{let o=class o extends P{constructor(r){super(),this.templateService=r,this.filter=new Ne,this.template=[],this.template$=this.templateService.getAllTemplate(1e3).pipe(Z(p=>{this.template=p.data,this.validateForm.patchValue({templateId:this.template[0].id})}))}ngOnInit(){this.validateForm=this.fb.group({templateId:[""]});let r;this.valueSubscription=this.validateForm.valueChanges.pipe(ve(100)).subscribe(p=>{JSON.stringify(p)!==JSON.stringify(r)&&(!r||r.id!==p.templateId)&&(r=this.template.find(m=>m.id===p.templateId),this.filter.next(r))})}ngOnDestroy(){super.ngOnDestroy(),this.valueSubscription&&this.valueSubscription.unsubscribe()}};o.\u0275fac=function(p){return new(p||o)(S(Me))},o.\u0275cmp=c({type:o,selectors:[["app-template-id-filter"]],outputs:{filter:"filter"},standalone:!0,features:[E,v],decls:10,vars:9,consts:[["nz-form","",3,"formGroup"],["nz-row","","nzGutter","20"],["nz-col","","nzSpan","12"],["nzFor","templateId",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["formControlName","templateId","nzShowSearch",""],[4,"ngIf"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(p,m){p&1&&(i(0,"form",0)(1,"div",1)(2,"div",2)(3,"nz-form-item")(4,"nz-form-label",3),l(5,"Giao di\u1EC7n"),n(),i(6,"nz-form-control",4)(7,"nz-select",5),f(8,nt,2,1,"ng-container",6),U(9,"async"),n()()()()()()),p&2&&(e("formGroup",m.validateForm),t(4),e("nzSm",10)("nzXs",24),t(2),e("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.templateId),t(2),e("ngIf",H(9,7,m.template$)))},dependencies:[q,X,x,V,w,R,G,A,j,F,b,C,N,g,D,k,$,B,h,y,re,oe]});let a=o;return a})();function rt(a,o){if(a&1){let s=ue();i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td"),l(8),n(),i(9,"td"),l(10),U(11,"json"),n(),i(12,"td"),l(13),n(),i(14,"td")(15,"button",9),u("click",function(){let p=ee(s).$implicit,m=W(3);return te(m.edit(p))}),l(16,"S\u1EEDa"),n(),i(17,"button",10),u("nzOnConfirm",function(){let p=ee(s).$implicit,m=W(3);return te(m.delete(p))}),l(18,"X\xF3a"),n()()()}if(a&2){let s=o.$implicit;t(2),T(s.name),t(2),T(s.code),t(2),T(s.templateType),t(2),T(s.dataType),t(2),T(H(11,6,s.config)),t(3),T(s.sortOrder)}}function ot(a,o){if(a&1&&(i(0,"div")(1,"div",7)(2,"h3"),l(3),n(),i(4,"nz-table",8)(5,"thead")(6,"tr")(7,"th"),l(8,"C\u1EA5u h\xECnh"),n(),i(9,"th"),l(10,"Code"),n(),i(11,"th"),l(12,"Lo\u1EA1i giao di\u1EC7n"),n(),i(13,"th"),l(14,"Lo\u1EA1i d\u1EEF li\u1EC7u"),n(),i(15,"th"),l(16,"Config"),n(),i(17,"th"),l(18,"Th\u1EE9 t\u1EF1"),n(),i(19,"th"),l(20,"X\u1EED l\xFD"),n()()(),i(21,"tbody"),f(22,rt,19,8,"tr",6),n()()()()),a&2){let s=o.$implicit;t(3),T(s[0]),t(),e("nzData",s[1]),t(18),e("ngForOf",s[1])}}function at(a,o){if(a&1){let s=ue();ie(0),i(1,"div",3)(2,"button",4),u("click",function(){ee(s);let p=W();return te(p.create())}),d(3,"span",5),n()(),f(4,ot,23,3,"div",6),ne()}if(a&2){let s=W();t(4),e("ngForOf",s.ObjectEntriesData)}}var ui=(()=>{let o=class o extends L(Oe){constructor(r){super(),this.templateDataService=r,this.loadDataSubject$=new Te,this.templateData$=this.loadDataSubject$.asObservable().pipe(ye(p=>this.templateDataService.getAllTemplateData(p.id)),Z(p=>{this.ObjectEntriesData=this.ObjectEntries(p)}))}ObjectEntries(r){return Object.entries(r)}create(){this.createComponentModal({nzTitle:"T\u1EA1o template data "+this.filter.name},We,this.filter).afterClose.subscribe(()=>this.loadDataSubject$.next(this.filter))}edit(r){this.createComponentModal({nzTitle:"C\u1EADp nh\u1EADt template data "+r.name+" / "+r.template?.name},Ue,r).afterClose.subscribe(()=>this.loadDataSubject$.next(this.filter))}delete(r){this.templateDataService.deleteTemplateData(r.id).subscribe(()=>this.loadDataSubject$.next(this.filter))}filterData(r){this.filter=r,this.loadDataSubject$.next(r)}};o.\u0275fac=function(p){return new(p||o)(S(J))},o.\u0275cmp=c({type:o,selectors:[["app-template-data-index"]],standalone:!0,features:[E,v],decls:4,vars:3,consts:[[1,"mb-2"],[3,"filter"],[4,"ngIf"],[1,"text-center","mb-2"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","T\u1EA1o publisher",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngFor","ngForOf"],[1,"mb-3"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzData"],["nz-button","","nzType","primary","nzSize","small",1,"mr1",3,"click"],["nz-button","","nzDanger","","nzType","primary","nzSize","small","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this task?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"]],template:function(p,m){p&1&&(i(0,"div",0)(1,"app-template-id-filter",1),u("filter",function(Ye){return m.filterData(Ye)}),n()(),f(2,at,5,1,"ng-container",2),U(3,"async")),p&2&&(t(2),e("ngIf",H(3,1,m.templateData$)))},dependencies:[Ge,Ae,Ie,xe,Ve,Xe,we,I,M,_,O,h,y,re,oe,be,De,qe,Re,_e,Fe,He]});let a=o;return a})();export{ui as TemplateDataIndexComponent};
