import{a as je}from"./chunk-O6754UNR.js";import{a as Oe,b as Ue,c as Le}from"./chunk-QEUNLEDV.js";import{a as D,b as P}from"./chunk-HHG4OQGC.js";import"./chunk-ASNUN4YP.js";import{b as Be}from"./chunk-YANWLB2B.js";import{a as b,b as Ie,c as Me,d as M,e as A,j as Ae,k as De,l as Pe,m as ke,n as $e,o as Ve,p as Xe}from"./chunk-CIAYRUPY.js";import"./chunk-OC6OS4EK.js";import{a as Ce,b as Se,c as ve,j as be,l as _e,m as xe,n as we,o as ye,p as Ne,q as Te,r as Fe,t as Ee}from"./chunk-53LNINAL.js";import"./chunk-PUH3HP37.js";import{d as me,e as se,g as N,h as de,k as pe,l as le,n as ce,o as ue,r as fe,s as ze,t as T,u as F,w as E,x as I}from"./chunk-TEFF5QW5.js";import{Ba as z,E as he,F as ge}from"./chunk-E7AKRIK7.js";import"./chunk-SE4MWOQF.js";import{b as ae}from"./chunk-3D2PYGCY.js";import{Ea as _,Fa as x,Kb as r,Lb as o,Mb as l,N as q,Nb as K,Ob as Q,Qb as $,Sc as ie,Tb as f,Tc as ne,Vb as S,Zc as re,_c as oe,a as w,ba as G,bd as y,cc as Y,dc as p,ea as W,ec as V,gb as d,hb as g,ia as H,kc as Z,lc as v,na as J,o as L,pc as X,qc as ee,rb as C,rc as te,s as j,ta as h,wb as k,y as R,yb as a}from"./chunk-KXMLQHF5.js";var c=(()=>{let e=class e{constructor(t){this.http=t}getAllAdmin(t=10,i=0){return this.http.get(z.apiUrl+`admin?perPage=${t}&page=${i}`).pipe(R(([m,U])=>({admin:m,count:U})))}getAdminById(t){return this.http.get(z.apiUrl+`admin/${t}`)}createAdmin(t){return this.http.post(z.apiUrl+"admin",t)}updateAdmin(t){return this.http.put(z.apiUrl+"admin",t)}deleteAdmin(t){return this.http.delete(z.apiUrl+`admin/${t}`)}changePassword(t){return this.http.put(z.apiUrl+"admin/change-password",t)}};e.\u0275fac=function(i){return new(i||e)(J(ae))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var Re=(()=>{let e=class e extends b(M,A){constructor(t){super(),this.adminService=t,this._formErrorMsg=w({username:{required:"Username is not valid"}},Le)}ngOnInit(){this.validateForm=this.fb.group(w({username:[null,[se.required]],disabled:[!1]},Oe),w({},Ue))}submitForm(){this.formValid()&&this.adminService.createAdmin(this.validateForm.value).pipe(this.httpErrorOperator("username")).subscribe(t=>{this.destroyModal(t)})}};e.\u0275fac=function(i){return new(i||e)(g(c))},e.\u0275cmp=h({type:e,selectors:[["app-admin-create"]],standalone:!0,features:[C,v],decls:25,vars:24,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","user",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","username","id","username"],["nzFor","password","nzRequired","",3,"nzSm","nzXs"],["nz-input","","type","password","id","password","formControlName","password"],["nzFor","passwordConfirm","nzRequired","",3,"nzSm","nzXs"],["nz-input","","type","password","formControlName","passwordConfirm","id","passwordConfirm"],["nzFor","disabled","nzRequired","",3,"nzSm","nzXs"],["nzSize","small","formControlName","disabled"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(i,m){i&1&&(r(0,"form",0),f("ngSubmit",function(){return m.submitForm()}),r(1,"nz-form-item")(2,"nz-form-label",1),p(3,"Username"),o(),r(4,"nz-form-control",2),l(5,"input",3),o()(),r(6,"nz-form-item")(7,"nz-form-label",4),p(8,"Password"),o(),r(9,"nz-form-control",2),l(10,"input",5),o()(),r(11,"nz-form-item")(12,"nz-form-label",6),p(13,"Confirm Password"),o(),r(14,"nz-form-control",2),l(15,"input",7),o()(),r(16,"nz-form-item")(17,"nz-form-label",8),p(18,"Khoa\u0301 ta\u0300i khoa\u0309n"),o(),r(19,"nz-form-control",2),l(20,"nz-switch",9),o()(),r(21,"nz-form-item",10)(22,"nz-form-control",11)(23,"button",12),p(24,"\u0110\u0103ng ky\u0301 ta\u0300i khoa\u0309n"),o()()()()),i&2&&(a("formGroup",m.validateForm),d(2),a("nzSm",10)("nzXs",24),d(2),a("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.username),d(3),a("nzSm",10)("nzXs",24),d(2),a("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.password),d(3),a("nzSm",10)("nzXs",24),d(2),a("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.passwordConfirm),d(3),a("nzSm",10)("nzXs",24),d(2),a("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.disabled),d(3),a("nzSpan",12)("nzOffset",8),d(),a("disabled",!m.validateForm.valid))},dependencies:[Te,Se,Ce,we,xe,Ne,ye,Ee,Fe,ve,ze,le,me,N,de,ce,ue,I,E,T,F,P,D,y]});let s=e;return s})();var qe=(()=>{let e=class e extends b(M,A){constructor(t){super(),this.adminService=t}submit(t){return this.adminService.changePassword(t)}};e.\u0275fac=function(i){return new(i||e)(g(c))},e.\u0275cmp=h({type:e,selectors:[["app-admin-change-password"]],standalone:!0,features:[C,v],decls:1,vars:1,consts:[[3,"submitFunc"]],template:function(i,m){i&1&&l(0,"app-change-password",0),i&2&&a("submitFunc",m.submit.bind(m))},dependencies:[je]});let s=e;return s})();function Ye(s,e){if(s&1){let n=$();r(0,"tr")(1,"td"),p(2),X(3,"date"),o(),r(4,"td"),p(5),o(),r(6,"td")(7,"nz-switch",7),f("ngModelChange",function(){let i=_(n).$implicit,m=S(2);return x(m.changeDisabled(i,!i.disabled))}),o()(),r(8,"td",8)(9,"button",9),f("click",function(){let i=_(n).$implicit,m=S(2);return x(m.changePassword(i))}),l(10,"span",10),o()()()}if(s&2){let n=e.$implicit;d(2),V(te(3,3,n.createdAt,"short")),d(3),V(n.username),d(2),a("ngModel",n.disabled)}}function Ze(s,e){if(s&1){let n=$();K(0),r(1,"nz-table",2,0),f("nzPageIndexChange",function(i){_(n);let m=S();return x(m.changePage(i))}),r(3,"thead")(4,"tr")(5,"th"),p(6,"Ng\xE0y kh\u1EDFi t\u1EA1o"),o(),r(7,"th"),p(8,"Ta\u0300i khoa\u0309n"),o(),r(9,"th"),p(10,"Disabled"),o(),r(11,"th"),p(12,"X\u1EED l\xFD "),o()(),r(13,"tr")(14,"th",3)(15,"button",4),f("click",function(){_(n);let i=S();return x(i.create())}),l(16,"span",5),o()()()(),r(17,"tbody"),k(18,Ye,11,6,"tr",6),o()(),Q()}if(s&2){let n=e.ngIf,t=Y(2),i=S();d(),a("nzData",n.admin)("nzTotal",i.totalAdmin)("nzPageIndex",i.pageIndex+1)("nzPageSize",i.pageSize),d(17),a("ngForOf",t.data)}}var u,Ge=(u=class extends b(Ie){constructor(e){super(),this.adminService=e,this.pageSize=10,this.pageIndex=0,this.totalAdmin=0,this.adminLoad$=new L(1),this.admin$=this.adminLoad$.pipe(q(100),G(()=>this.adminService.getAllAdmin(this.pageSize,this.pageIndex))).pipe(W(n=>{this.totalAdmin=n.count}))}ngOnInit(){this.adminLoad$.next(!0)}changePage(e){this.pageIndex=e-1,this.adminLoad$.next(!0)}ngOnDestroy(){}update(e){}delete(e){this.adminService.deleteAdmin(e.id).subscribe({complete:()=>{this.adminLoad$.next(!0)}})}create(){let e=this.createComponentModal({nzTitle:"Ta\u0323o ta\u0300i khoa\u0309n Admin"},Re);this.createModalSubscription$=e.afterClose.subscribe(n=>{n&&n.id&&this.adminLoad$.next(!0)})}changeDisabled(e,n){this.adminService.updateAdmin({id:e.id,disabled:n}).subscribe(t=>{this.adminLoad$.next(!0)})}changePassword(e){this.createComponentModal({nzTitle:"\u0110\xF4\u0309i m\xE2\u0323t kh\xE2\u0309u ta\u0300i khoa\u0309n "+e.username},qe,e)}},u.\u0275fac=function(n){return new(n||u)(g(c))},u.\u0275cmp=h({type:u,selectors:[["app-admin-index"]],standalone:!0,features:[Z([c]),C,v],decls:2,vars:3,consts:[["adminTable",""],[4,"ngIf"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzPageIndexChange","nzData","nzTotal","nzPageIndex","nzPageSize"],["colspan","11",1,"center-align"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","T\u1EA1o ta\u0300i khoa\u0309n",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"],[1,"btn-float"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","\u0110\xF4\u0309i m\xE2\u0323t kh\xE2\u0309u admin",1,"mr1",3,"click"],["nz-icon","","nzType","key","nzTheme","outline"]],template:function(n,t){n&1&&(k(0,Ze,19,5,"ng-container",1),X(1,"async")),n&2&&a("ngIf",ee(1,1,t.admin$))},dependencies:[Xe,ke,Ae,De,Ve,Pe,$e,I,E,T,F,ge,he,re,ne,oe,Be,P,D,fe,N,pe,y,ie,_e,be]}),u);Ge=j([Me()],Ge);export{Ge as AdminIndexComponent};
