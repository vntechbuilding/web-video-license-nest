import{a as Me,b as B}from"./chunk-TKP4QHVZ.js";import{a as Ge,b as We,c as ke,d as Pe,e as Re,f as Ue,g as je,h as He,j as Je,k as Ke}from"./chunk-HDGNHQCO.js";import{a as Qe}from"./chunk-ON5W3XZ3.js";import{b as he}from"./chunk-E2MPIU5O.js";import{b as Ye}from"./chunk-FIVRONS2.js";import"./chunk-QCY6BLAQ.js";import{a as Ce}from"./chunk-HUONOAPD.js";import{a as _e,c as ge}from"./chunk-W244JUTK.js";import"./chunk-5TKBH2EH.js";import"./chunk-AB36JMP2.js";import"./chunk-7XZ66E5Q.js";import"./chunk-W72PHP5T.js";import"./chunk-HHG4OQGC.js";import"./chunk-ASNUN4YP.js";import{a as Le,b as $e}from"./chunk-YANWLB2B.js";import{a as q,b as qe,d as se,e as de,f as fe,g as ze,h as ce,p as Be}from"./chunk-CIAYRUPY.js";import"./chunk-OC6OS4EK.js";import{a as te,b as re,c as ne,j as Ae,m as oe,n as ie,o as me,p as ae,q as pe,r as le,t as ue}from"./chunk-53LNINAL.js";import"./chunk-PUH3HP37.js";import{d as H,e as c,g as J,h as K,l as Q,n as Y,o as Z,r as Oe,s as ee,t as O,u as V,w as X,x as A}from"./chunk-TEFF5QW5.js";import{E as Ve,F as Xe}from"./chunk-E7AKRIK7.js";import"./chunk-SE4MWOQF.js";import"./chunk-3D2PYGCY.js";import{Ea as L,Fa as $,Kb as i,Lb as m,Mb as d,Nb as v,Ob as y,Qb as U,Sc as j,Tb as z,Tc as F,Vb as g,Yb as Se,Yc as we,Zc as x,_ as Te,a as G,b as W,ba as h,bd as w,cb as De,cc as ve,dc as s,ea as be,gb as n,gc as Ie,hb as E,hc as N,ic as T,jc as b,lc as D,n as Ne,nc as ye,o as k,pc as C,qc as I,rb as S,rc as Fe,sc as xe,ta as M,u as P,wb as f,y as R,yb as r}from"./chunk-KXMLQHF5.js";function ct(o,t){if(o&1&&d(0,"nz-option",19),o&2){let p=t.$implicit;r("nzValue",p.id)("nzLabel",p.text)}}function _t(o,t){if(o&1&&(v(0),f(1,ct,1,2,"nz-option",18),y()),o&2){let p=t.$implicit;n(),r("ngForOf",p)}}var it=(()=>{let t=class t extends q(se,de){constructor(l){super(),this.menuService=l,this.loadMenu$=new k,this.menu$=this.loadMenu$.pipe(h(a=>a?this.menuService.getAllDomainMenu(a):P([])),R(a=>Me(a))),this._formErrorMsg={title:{required:"Ti\xEAu \u0111\u1EC1 kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},text:{required:"N\u1ED9i dung hi\u1EC3n th\u1ECB kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},url:{required:"Url kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"}}}ngOnInit(){this.validateForm=this.fb.group({title:["",[c.required]],text:["",[c.required]],url:["",[c.required]],sortOrder:[0,[c.required]],parentId:[""]})}submitForm(){this.formValid()&&this.menuService.createMenu(this.removeBlankString(this.validateForm.value)).pipe(this.httpErrorOperator("publisher")).subscribe(l=>{this.destroyModal(l)})}updateDomainId(l){this.loadMenu$.next(l)}};t.\u0275fac=function(a){return new(a||t)(E(B))},t.\u0275cmp=M({type:t,selectors:[["app-menu-create"]],standalone:!0,features:[S,D],decls:34,vars:44,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","text",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","text","id","text"],["nzRequired","","nzFor","title",3,"nzSm","nzXs"],["nz-input","","formControlName","title","id","title"],["nzRequired","","nzFor","url",3,"nzSm","nzXs"],["nz-input","","formControlName","url","id","url"],["nzRequired","","nzFor","sortOrder",3,"nzSm","nzXs"],["formControlName","sortOrder",3,"nzMin","nzMax"],[3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],[3,"formErrorMsgChange","domainId","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["nzFor","parentId",3,"nzSm","nzXs"],["formControlName","parentId","nzShowSearch","","nzAllowClear",""],[4,"ngIf"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(a,e){a&1&&(i(0,"form",0),z("ngSubmit",function(){return e.submitForm()}),i(1,"nz-form-item")(2,"nz-form-label",1),s(3,"Menu"),m(),i(4,"nz-form-control",2),d(5,"input",3),m()(),i(6,"nz-form-item")(7,"nz-form-label",4),s(8,"Ti\xEAu \u0111\u1EC1"),m(),i(9,"nz-form-control",2),d(10,"input",5),m()(),i(11,"nz-form-item")(12,"nz-form-label",6),s(13,"Url"),m(),i(14,"nz-form-control",2),d(15,"input",7),m()(),i(16,"nz-form-item")(17,"nz-form-label",8),s(18,"Th\u1EE9 t\u1EF1"),m(),i(19,"nz-form-control",2),d(20,"nz-input-number",9),m()(),i(21,"app-user-id-input",10),b("formErrorMsgChange",function(u){return T(e.formErrorMsg,u)||(e.formErrorMsg=u),u}),m(),i(22,"app-domain-input-by-user",11),b("formErrorMsgChange",function(u){return T(e.formErrorMsg,u)||(e.formErrorMsg=u),u}),z("domainId",function(u){return e.updateDomainId(u)}),m(),i(23,"nz-form-item")(24,"nz-form-label",12),s(25,"Menu m\u1EE5c cha"),m(),i(26,"nz-form-control",2)(27,"nz-select",13),f(28,_t,2,1,"ng-container",14),C(29,"async"),m()()(),i(30,"nz-form-item",15)(31,"nz-form-control",16)(32,"button",17),s(33,"T\u1EA1o menu"),m()()()()),a&2&&(r("formGroup",e.validateForm),n(2),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.text),n(3),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.title),n(3),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.url),n(3),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.sortOrder),n(),r("nzMin",0)("nzMax",999999),n(),r("validators",e.validators)("defaultValue",e.defaultValue),N("formErrorMsg",e.formErrorMsg),r("formGroup",e.validateForm)("formErrors",e.formErrors),n(),r("validators",e.validators)("defaultValue",e.defaultValue),N("formErrorMsg",e.formErrorMsg),r("formGroup",e.validateForm)("formErrors",e.formErrors),n(2),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.parentId),n(2),r("ngIf",I(29,42,e.menu$)),n(3),r("nzSpan",12)("nzOffset",8),n(),r("disabled",!e.validateForm.valid))},dependencies:[pe,re,te,ie,oe,ae,me,ne,A,X,O,V,ue,le,ee,Q,H,J,K,Y,Z,w,j,F,x,fe,ce,ze,ge,_e,he,Ce]});let o=t;return o})();function gt(o,t){if(o&1&&d(0,"nz-option",19),o&2){let p=t.$implicit;r("nzValue",p.id)("nzLabel",p.text)}}function Ct(o,t){if(o&1&&(v(0),f(1,gt,1,2,"nz-option",18),y()),o&2){let p=t.$implicit;n(),r("ngForOf",p)}}var mt=(()=>{let t=class t extends q(se,de){constructor(l){super(),this.menuService=l,this.loadMenu$=new k,this.menu$=this.loadMenu$.pipe(h(a=>a?this.menuService.getAllDomainMenu(a):P([])),R(a=>Me(a))),this._formErrorMsg={title:{required:"Ti\xEAu \u0111\u1EC1 kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},text:{required:"N\u1ED9i dung hi\u1EC3n th\u1ECB kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},url:{required:"Url kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"}}}ngOnInit(){this.defaultValue=this.nzModalData,this.defaultValue.userId=this.nzModalData.domain?.userId,this.loadMenu$.next(this.nzModalData.domainId),this.validateForm=this.fb.group({title:[this.nzModalData.title,[c.required]],text:[this.nzModalData.text,[c.required]],url:[this.nzModalData.url,[c.required]],sortOrder:[this.nzModalData.sortOrder,[c.required]],parentId:[this.nzModalData.parentId]})}submitForm(){this.formValid()&&this.menuService.updateMenu(W(G({},this.removeBlankString(this.validateForm.value)),{menuId:this.nzModalData.id})).pipe(this.httpErrorOperator("publisher")).subscribe(l=>{this.destroyModal(l)})}updateDomainId(l){this.loadMenu$.next(l)}};t.\u0275fac=function(a){return new(a||t)(E(B))},t.\u0275cmp=M({type:t,selectors:[["app-menu-edit"]],standalone:!0,features:[S,D],decls:34,vars:44,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","text",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","text","id","text"],["nzRequired","","nzFor","title",3,"nzSm","nzXs"],["nz-input","","formControlName","title","id","title"],["nzRequired","","nzFor","url",3,"nzSm","nzXs"],["nz-input","","formControlName","url","id","url"],["nzRequired","","nzFor","sortOrder",3,"nzSm","nzXs"],["formControlName","sortOrder",3,"nzMin","nzMax"],[3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],[3,"formErrorMsgChange","domainId","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["nzFor","parentId",3,"nzSm","nzXs"],["formControlName","parentId","nzShowSearch","","nzAllowClear",""],[4,"ngIf"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(a,e){a&1&&(i(0,"form",0),z("ngSubmit",function(){return e.submitForm()}),i(1,"nz-form-item")(2,"nz-form-label",1),s(3,"Menu"),m(),i(4,"nz-form-control",2),d(5,"input",3),m()(),i(6,"nz-form-item")(7,"nz-form-label",4),s(8,"Ti\xEAu \u0111\u1EC1"),m(),i(9,"nz-form-control",2),d(10,"input",5),m()(),i(11,"nz-form-item")(12,"nz-form-label",6),s(13,"Url"),m(),i(14,"nz-form-control",2),d(15,"input",7),m()(),i(16,"nz-form-item")(17,"nz-form-label",8),s(18,"Th\u1EE9 t\u1EF1"),m(),i(19,"nz-form-control",2),d(20,"nz-input-number",9),m()(),i(21,"app-user-id-input",10),b("formErrorMsgChange",function(u){return T(e.formErrorMsg,u)||(e.formErrorMsg=u),u}),m(),i(22,"app-domain-input-by-user",11),b("formErrorMsgChange",function(u){return T(e.formErrorMsg,u)||(e.formErrorMsg=u),u}),z("domainId",function(u){return e.updateDomainId(u)}),m(),i(23,"nz-form-item")(24,"nz-form-label",12),s(25,"Menu m\u1EE5c cha"),m(),i(26,"nz-form-control",2)(27,"nz-select",13),f(28,Ct,2,1,"ng-container",14),C(29,"async"),m()()(),i(30,"nz-form-item",15)(31,"nz-form-control",16)(32,"button",17),s(33,"C\u1EADp nh\u1EADt menu"),m()()()()),a&2&&(r("formGroup",e.validateForm),n(2),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.text),n(3),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.title),n(3),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.url),n(3),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.sortOrder),n(),r("nzMin",0)("nzMax",999999),n(),r("validators",e.validators)("defaultValue",e.defaultValue),N("formErrorMsg",e.formErrorMsg),r("formGroup",e.validateForm)("formErrors",e.formErrors),n(),r("validators",e.validators)("defaultValue",e.defaultValue),N("formErrorMsg",e.formErrorMsg),r("formGroup",e.validateForm)("formErrors",e.formErrors),n(2),r("nzSm",10)("nzXs",24),n(2),r("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.parentId),n(2),r("ngIf",I(29,42,e.menu$)),n(3),r("nzSpan",12)("nzOffset",8),n(),r("disabled",!e.validateForm.valid))},dependencies:[pe,re,te,ie,oe,ae,me,ne,A,X,O,V,ue,le,ee,Q,H,J,K,Y,Z,w,j,F,x,fe,ce,ze,ge,_e,he,Ce]});let o=t;return o})();var Ee=class{constructor(){this.transformer=(t,p)=>W(G({},t),{expandable:!!t.children&&t.children.length>0,name:t.title,level:p}),this.treeControl=new Ge(t=>t.level,t=>t.expandable),this.treeFlattener=new Je(this.transformer,t=>t.level,t=>t.expandable,t=>t.children),this.dataSource=new Ke(this.treeControl,this.treeFlattener),this.showLeafIcon=!1,this.hasChild=(t,p)=>p.expandable}};var at=o=>({menu:o});function ht(o,t){o&1&&d(0,"nz-tree-node-option")}function Mt(o,t){if(o&1&&(i(0,"nz-tree-node",10)(1,"nz-tree-node-toggle",11),d(2,"span",12),m(),f(3,ht,1,0,"nz-tree-node-option",13),m()),o&2){let p=t.$implicit;g(2);let l=ve(5);n(3),r("ngTemplateOutlet",l)("ngTemplateOutletContext",ye(2,at,p))}}function Et(o,t){o&1&&d(0,"nz-tree-node-option")}function St(o,t){if(o&1&&(i(0,"nz-tree-node",10)(1,"nz-tree-node-toggle"),d(2,"span",14),m(),f(3,Et,1,0,"nz-tree-node-option",13),m()),o&2){let p=t.$implicit,l=g(2),a=ve(5);n(2),r("nzType",l.treeControl.isExpanded(p)?"minus-square":"plus-square"),n(),r("ngTemplateOutlet",a)("ngTemplateOutletContext",ye(3,at,p))}}function vt(o,t){if(o&1){let p=U();v(0),i(1,"div",4)(2,"button",5),z("click",function(){L(p);let a=g();return $(a.create())}),d(3,"span",6),m()(),i(4,"nz-tree-view",7),f(5,Mt,4,4,"nz-tree-node",8)(6,St,4,5,"nz-tree-node",9),m(),y()}if(o&2){let p=g();n(4),r("nzTreeControl",p.treeControl)("nzDataSource",p.dataSource),n(2),r("nzTreeNodeDefWhen",p.hasChild)}}function yt(o,t){if(o&1){let p=U();i(0,"a",15),C(1,"domainUrl"),s(2),m(),s(3," \xA0 - \xA0 "),i(4,"button",16),z("click",function(){let a=L(p).menu,e=g();return $(e.edit(a))}),s(5,"C\u1EADp nh\u1EADt"),m(),s(6," \xA0 - \xA0 "),i(7,"button",17),z("nzOnConfirm",function(){let a=L(p).menu,e=g();return $(e.delete(a))}),s(8,"X\xF3a menu"),m()}if(o&2){let p=t.menu;Se("href",Fe(1,4,p.url,p.domain),De),Se("title",p.title),n(2),Ie(" ",p.text," / ",p.sortOrder," ")}}var $r=(()=>{let t=class t extends q(qe,Ee){constructor(l){super(),this.menuService=l,this.loadDataSubject$=new Ne(!0),this.loadData$=this.loadDataSubject$.asObservable().pipe(Te(1)),this.menu$=this.loadData$.pipe(h(()=>this.filterData&&this.filterData.domainId?this.menuService.getAllDomainMenu(this.filterData.domainId):this.filterData&&this.filterData.userId?this.menuService.getAllUserMenu(this.filterData.userId):this.menuService.getAllMenu())).pipe(be(a=>{this.dataSource.setData(a),this.treeControl.expandAll()}))}create(){this.createComponentModal({nzTitle:"T\u1EA1o menu"},it).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}edit(l){this.createComponentModal({nzTitle:"C\u1EADp nh\u1EADt menu "+l.title},mt,l).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}delete(l){this.menuService.deleteMenu(l.id).subscribe(()=>this.loadDataSubject$.next(!0))}filter(l){this.filterData=l,this.loadDataSubject$.next(!0)}};t.\u0275fac=function(a){return new(a||t)(E(B))},t.\u0275cmp=M({type:t,selectors:[["app-menu-index"]],standalone:!0,features:[S,D],decls:6,vars:3,consts:[["nodeOption",""],[1,"mb-2"],[3,"filter"],[4,"ngIf"],[1,"text-center","mb2"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","T\u1EA1o menu",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[3,"nzTreeControl","nzDataSource"],["nzTreeNodeIndentLine","",4,"nzTreeNodeDef"],["nzTreeNodeIndentLine","",4,"nzTreeNodeDef","nzTreeNodeDefWhen"],["nzTreeNodeIndentLine",""],["nzTreeNodeNoopToggle",""],["nz-icon","","nzType","file","nzTheme","outline"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-icon","","nzTheme","outline",3,"nzType"],["target","_blank",3,"href","title"],["nz-button","","nzType","primary","nzSize","small",3,"click"],["nz-button","","nzType","primary","nzDanger","","nzSize","small","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this task?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"]],template:function(a,e){if(a&1){let _=U();i(0,"div",1)(1,"app-user-domain-filter",2),z("filter",function(pt){return L(_),$(e.filter(pt))}),m()(),f(2,vt,7,3,"ng-container",3),C(3,"async"),f(4,yt,9,7,"ng-template",null,0,xe)}a&2&&(n(2),r("ngIf",I(3,1,e.menu$)))},dependencies:[Qe,Be,A,X,O,V,w,F,we,x,Oe,$e,Le,Xe,Ve,Ye,Ae,Re,Ue,We,ke,je,Pe,He]});let o=t;return o})();export{$r as MenuIndexComponent};
