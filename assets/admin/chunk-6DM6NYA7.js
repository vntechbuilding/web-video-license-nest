import{a as q}from"./chunk-5TKBH2EH.js";import{a as Ke}from"./chunk-6YSGIGXK.js";import{a as mt}from"./chunk-FTHBAHA3.js";import{a as je}from"./chunk-SLOIDIPU.js";import{d as rt}from"./chunk-FCOSAHCS.js";import{a as ze}from"./chunk-7XZ66E5Q.js";import{a as ce}from"./chunk-W72PHP5T.js";import{a as ae,b as qe}from"./chunk-HHG4OQGC.js";import{a as He}from"./chunk-ASNUN4YP.js";import"./chunk-YANWLB2B.js";import{a as R,b as Re,d as oe,e as ne,f as me,g as pe,h as le,j as Je,k as Qe,l as Ye,m as Ze,n as et,o as tt,p as it}from"./chunk-CIAYRUPY.js";import"./chunk-OC6OS4EK.js";import{a as A,b as U,c as W,j as ke,l as $e,m as L,n as ie,o as k,p as re,q as $,r as fe,t as j}from"./chunk-53LNINAL.js";import"./chunk-PUH3HP37.js";import{a as Xe,d as de,e as Z,g as w,h as V,k as Ae,l as ee,n as x,o as te,r as Ue,s as G,t as O,u as B,w as P,x as X}from"./chunk-TEFF5QW5.js";import{Ba as ue,E as We,F as Le}from"./chunk-E7AKRIK7.js";import"./chunk-SE4MWOQF.js";import"./chunk-3D2PYGCY.js";import{Ea as Q,Fa as Y,Kb as n,Lb as m,Ma as we,Mb as f,Nb as E,Ob as D,Qb as Ce,Sc as N,Tb as u,Tc as I,Vb as _,Zb as xe,Zc as T,_c as Pe,a as K,b as J,bd as C,cb as Ve,cc as Ge,dc as s,e as at,ec as se,gb as a,ha as Te,hb as c,hc as M,ic as b,jc as F,kc as Oe,lc as h,pc as S,qc as y,rb as v,rc as Be,ta as g,wb as z,yb as i}from"./chunk-KXMLQHF5.js";function pt(p,r){if(p&1&&f(0,"nz-option",6),p&2){let l=r.$implicit;i("nzValue",l.id)("nzLabel",l.name)}}function lt(p,r){if(p&1&&(E(0),z(1,pt,1,2,"nz-option",5),D()),p&2){let l=r.$implicit;a(),i("ngForOf",l.data)}}var he=(()=>{let r=class r extends He{constructor(o){super(),this.templateService=o,this.template$=this.templateService.getAllTemplate(9999),this.templateId=new we,this.allowClear=!1}ngOnInit(){this.addControl("templateId",this.validators.templateId),this.templateIdSubscription=this.formGroup.get("templateId")?.valueChanges.subscribe(o=>this.templateId.emit(o))}ngOnDestroy(){this.templateIdSubscription&&this.templateIdSubscription.unsubscribe()}};r.\u0275fac=function(t){return new(t||r)(c(Ke))},r.\u0275cmp=g({type:r,selectors:[["app-template-id-input"]],inputs:{allowClear:"allowClear"},outputs:{templateId:"templateId"},standalone:!0,features:[Oe([{provide:Xe,useExisting:Te(()=>r),multi:!0}]),v,h],decls:8,vars:10,consts:[[3,"formGroup"],["nzFor","templateId",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["formControlName","templateId","nzShowSearch","",3,"nzAllowClear"],[4,"ngIf"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"nz-form-item")(2,"nz-form-label",1),s(3,"Giao di\u1EC7n"),m(),n(4,"nz-form-control",2)(5,"nz-select",3),z(6,lt,2,1,"ng-container",4),S(7,"async"),m()()()()),t&2&&(i("formGroup",e.formGroup),a(2),i("nzSm",10)("nzXs",24),a(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.templateId),a(),i("nzAllowClear",e.allowClear),a(),i("ngIf",y(7,8,e.template$)))},dependencies:[$,U,A,L,re,k,le,me,pe,W,G,w,V,x,te,j,C,N,I,T]});let p=r;return p})();function ft(p,r){if(p&1&&f(0,"nz-option",15),p&2){let l=r.$implicit;i("nzValue",l.id)("nzLabel",l.fullName+" "+l.email+" "+l.phone)}}function ut(p,r){if(p&1&&(E(0),z(1,ft,1,2,"nz-option",14),D()),p&2){let l=r.$implicit;a(),i("ngForOf",l.data)}}var ye=(()=>{let r=class r extends R(oe,ne){constructor(o,t){super(),this.user=o,this.domain=t,this.user$=this.user.getAllUser(1e3),this._formErrorMsg={domain:{required:"Domain kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},userId:{required:"User kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"}}}ngOnInit(){this.validateForm=this.fb.group({domain:["",[Z.required]],https:[!0,[Z.required]],userId:["",[Z.required]]})}submitForm(){this.formValid()&&this.domain.createDomain(this.removeBlankString(this.validateForm.value)).pipe(this.httpErrorOperator("domain")).subscribe(o=>{this.destroyModal(o)})}};r.\u0275fac=function(t){return new(t||r)(c(ze),c(q))},r.\u0275cmp=g({type:r,selectors:[["app-domain-create"]],standalone:!0,features:[v,h],decls:24,vars:32,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","domain",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","domain","id","domain"],["nzFor","https",3,"nzSm","nzXs"],["nzSize","small","formControlName","https"],["nzFor","userId",3,"nzSm","nzXs"],["formControlName","userId","nzShowSearch",""],[4,"ngIf"],[3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["label","Kh\xF3a domain",3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(t,e){t&1&&(n(0,"form",0),u("ngSubmit",function(){return e.submitForm()}),n(1,"nz-form-item")(2,"nz-form-label",1),s(3,"Domain"),m(),n(4,"nz-form-control",2),f(5,"input",3),m()(),n(6,"nz-form-item")(7,"nz-form-label",4),s(8,"Https"),m(),n(9,"nz-form-control",2),f(10,"nz-switch",5),m()(),n(11,"nz-form-item")(12,"nz-form-label",6),s(13,"User"),m(),n(14,"nz-form-control",2)(15,"nz-select",7),z(16,ut,2,1,"ng-container",8),S(17,"async"),m()()(),n(18,"app-template-id-input",9),F("formErrorMsgChange",function(d){return b(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),m(),n(19,"app-disabled-input",10),F("formErrorMsgChange",function(d){return b(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),m(),n(20,"nz-form-item",11)(21,"nz-form-control",12)(22,"button",13),s(23,"T\u1EA1o Domain"),m()()()()),t&2&&(i("formGroup",e.validateForm),a(2),i("nzSm",10)("nzXs",24),a(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.domain),a(3),i("nzSm",10)("nzXs",24),a(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.https),a(3),i("nzSm",10)("nzXs",24),a(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.userId),a(2),i("ngIf",y(17,30,e.user$)),a(2),i("validators",e.validators)("defaultValue",e.defaultValue),M("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors),a(),i("validators",e.validators)("defaultValue",e.defaultValue),M("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors),a(2),i("nzSpan",12)("nzOffset",8),a(),i("disabled",!e.validateForm.valid))},dependencies:[$,U,A,ie,L,re,k,W,X,P,O,B,j,fe,G,ee,de,w,V,x,te,ce,le,me,pe,C,N,I,T,ae,he]});let p=r;return p})();function ct(p,r){if(p&1&&f(0,"nz-option",15),p&2){let l=r.$implicit;i("nzValue",l.id)("nzLabel",l.fullName+" "+l.email+" "+l.phone)}}function zt(p,r){if(p&1&&(E(0),z(1,ct,1,2,"nz-option",14),D()),p&2){let l=r.$implicit;a(),i("ngForOf",l.data)}}var Ne=(()=>{let r=class r extends R(oe,ne){constructor(o,t){super(),this.user=o,this.domain=t,this.user$=this.user.getAllUser(1e3),this._formErrorMsg={domain:{required:"Domain kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"},userId:{required:"User kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"}}}ngOnInit(){this.validateForm=this.fb.group({domain:[this.nzModalData.domain,[Z.required]],userId:[this.nzModalData.userId,[Z.required]],disabled:[this.nzModalData.disabled],https:[this.nzModalData.https]})}submitForm(){this.formValid()&&this.domain.updateDomain(this.removeBlankString(J(K({},this.validateForm.value),{id:this.nzModalData.id}))).pipe(this.httpErrorOperator("domain")).subscribe(o=>{this.destroyModal(o)})}};r.\u0275fac=function(t){return new(t||r)(c(ze),c(q))},r.\u0275cmp=g({type:r,selectors:[["app-domain-edit"]],standalone:!0,features:[v,h],decls:24,vars:32,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","domain",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","domain","id","domain"],["nzFor","https",3,"nzSm","nzXs"],["nzSize","small","formControlName","https"],["nzFor","userId",3,"nzSm","nzXs"],["formControlName","userId","nzShowSearch",""],[4,"ngIf"],[3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["label","Kh\xF3a domain",3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(t,e){t&1&&(n(0,"form",0),u("ngSubmit",function(){return e.submitForm()}),n(1,"nz-form-item")(2,"nz-form-label",1),s(3,"Domain"),m(),n(4,"nz-form-control",2),f(5,"input",3),m()(),n(6,"nz-form-item")(7,"nz-form-label",4),s(8,"Https"),m(),n(9,"nz-form-control",2),f(10,"nz-switch",5),m()(),n(11,"nz-form-item")(12,"nz-form-label",6),s(13,"User"),m(),n(14,"nz-form-control",2)(15,"nz-select",7),z(16,zt,2,1,"ng-container",8),S(17,"async"),m()()(),n(18,"app-template-id-input",9),F("formErrorMsgChange",function(d){return b(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),m(),n(19,"app-disabled-input",10),F("formErrorMsgChange",function(d){return b(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),m(),n(20,"nz-form-item",11)(21,"nz-form-control",12)(22,"button",13),s(23,"C\u1EADp nh\u1EADt Domain"),m()()()()),t&2&&(i("formGroup",e.validateForm),a(2),i("nzSm",10)("nzXs",24),a(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.domain),a(3),i("nzSm",10)("nzXs",24),a(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.https),a(3),i("nzSm",10)("nzXs",24),a(2),i("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.userId),a(2),i("ngIf",y(17,30,e.user$)),a(2),i("validators",e.validators)("defaultValue",e.defaultValue),M("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors),a(),i("validators",e.validators)("defaultValue",e.defaultValue),M("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors),a(2),i("nzSpan",12)("nzOffset",8),a(),i("disabled",!e.validateForm.valid))},dependencies:[$,U,A,ie,L,re,k,W,X,P,O,B,j,fe,G,ee,de,w,V,x,te,ce,le,me,pe,C,N,I,T,ae,he]});let p=r;return p})();var Ie=at(mt());var nt=(()=>{let r=class r extends R(oe,ne){constructor(o){super(),this.domainService=o,this.uploadFaviconUrl=ue.uploadFaviconUrl+this.nzModalData.id+"/",this._formErrorMsg={}}ngOnInit(){this.defaultValue.favicon="favicon.ico",this.validateForm=this.fb.group({favicon:[""],domainId:[this.nzModalData.id]})}submitForm(){this.formValid()&&this.domainService.updateDomainFavicon(this.removeBlankString(J(K({},this.validateForm.value),{domainId:this.nzModalData.id}))).pipe(this.httpErrorOperator("favicon")).subscribe(o=>{this.destroyModal(o)})}};r.\u0275fac=function(t){return new(t||r)(c(q))},r.\u0275cmp=g({type:r,selectors:[["app-domain-favicon"]],standalone:!0,features:[v,h],decls:6,vars:13,consts:[["nz-form","",3,"ngSubmit","formGroup"],[3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","label","defaultValue","defaultField","aspectRatio","uploadContentImageUrl"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(t,e){t&1&&(n(0,"form",0),u("ngSubmit",function(){return e.submitForm()}),n(1,"app-content-image-input",1),F("formErrorMsgChange",function(d){return b(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),m(),n(2,"nz-form-item",2)(3,"nz-form-control",3)(4,"button",4),s(5,"C\u1EADp nh\u1EADt Domain Favicon"),m()()()()),t&2&&(i("formGroup",e.validateForm),a(),i("validators",e.validators),M("formErrorMsg",e.formErrorMsg),i("formGroup",e.validateForm)("formErrors",e.formErrors)("label","Favicon")("defaultValue",e.defaultValue)("defaultField","favicon")("aspectRatio",1)("uploadContentImageUrl",e.uploadFaviconUrl),a(2),i("nzSpan",12)("nzOffset",8),a(),i("disabled",!e.validateForm.valid))},dependencies:[$,U,A,ie,L,k,W,X,P,O,B,j,G,ee,V,x,C,rt]});let p=r;return p})();function gt(p,r){if(p&1){let l=Ce();n(0,"tr")(1,"td"),s(2),S(3,"date"),m(),n(4,"td"),s(5),m(),n(6,"td"),f(7,"img",7),m(),n(8,"td"),s(9),m(),n(10,"td")(11,"nz-switch",8),u("ngModelChange",function(){let t=Q(l).$implicit,e=_(2);return Y(e.changeHttps(t,!t.https))}),m()(),n(12,"td"),s(13),m(),n(14,"td")(15,"nz-switch",8),u("ngModelChange",function(){let t=Q(l).$implicit,e=_(2);return Y(e.changeDisabled(t,!t.disabled))}),m()(),n(16,"td")(17,"button",9),u("click",function(){let t=Q(l).$implicit,e=_(2);return Y(e.editDomain(t))}),s(18,"S\u1EEDa"),m(),n(19,"button",10),u("click",function(){let t=Q(l).$implicit,e=_(2);return Y(e.updateDomainFavicon(t))}),s(20,"Favicon"),m()()()}if(p&2){let l=r.$implicit,o=_(2);a(2),se(Be(3,9,l.createdAt,"dd/MM/yyyy")),a(3),se(l.domain),a(2),xe("src","",o.uploadFaviconUrl,"",l.id,"/favicon.ico",Ve),a(2),se(l.template==null?null:l.template.name),a(2),i("ngModel",l.https),a(2),se(l.user==null?null:l.user.fullName),a(2),i("ngModel",l.disabled)}}function vt(p,r){if(p&1){let l=Ce();E(0),n(1,"nz-table",2,0),u("nzPageIndexChange",function(t){Q(l);let e=_();return Y(e.changePage(t))}),n(3,"thead")(4,"tr")(5,"th"),s(6,"Th\u01A1\u0300i gian kh\u1EDFi t\u1EA1o"),m(),n(7,"th"),s(8,"Domain"),m(),n(9,"th"),s(10,"Favicon"),m(),n(11,"th"),s(12,"Template"),m(),n(13,"th"),s(14,"Https"),m(),n(15,"th"),s(16,"User"),m(),n(17,"th"),s(18,"Disabled"),m(),n(19,"th"),s(20,"X\u1EED l\xFD"),m()(),n(21,"tr")(22,"th",3)(23,"button",4),u("click",function(){Q(l);let t=_();return Y(t.create())}),f(24,"span",5),m()()()(),n(25,"tbody"),z(26,gt,21,12,"tr",6),m()(),D()}if(p&2){let l=r.ngIf,o=Ge(2),t=_();a(),i("nzData",l.data)("nzTotal",l.count)("nzPageIndex",t.pageIndex+1)("nzPageSize",t.pageSize),a(25),i("ngForOf",o.data)}}var Pi=(()=>{let r=class r extends R(je,Re){constructor(o){super(),this.domainService=o,this.uploadFaviconUrl=ue.uploadFaviconUrl,this.pageSize=20,this.domains$=this.createObservableData((t,e)=>this.domainService.allDomains(t,e))}create(){this.createComponentModal({nzTitle:"Create Domain"},ye).afterClose.subscribe(t=>{t&&this.loadDataSubject$.next(!0)})}updateDomainFavicon(o){this.createComponentModal({nzTitle:"Update Domain Favicon "+o.domain,nzWidth:"90vw"},nt,o).afterClose.subscribe(e=>{e&&this.loadDataSubject$.next(!0)})}updateDomain(o){this.createComponentModal({nzTitle:"Update Domain "+o.domain},Ne,{domain:o}).afterClose.subscribe(e=>{e&&this.loadDataSubject$.next(!0)})}changeDisabled(o,t){return this.domainService.updateDomain(J(K({},(0,Ie.omit)(o,"user")),{disabled:t})).subscribe(()=>this.loadDataSubject$.next(!0))}changeHttps(o,t){return this.domainService.updateDomain(J(K({},(0,Ie.omit)(o,"user")),{https:t})).subscribe(()=>this.loadDataSubject$.next(!0))}createDomain(){this.createComponentModal({nzTitle:"T\u1EA1o domain"},ye).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}editDomain(o){this.createComponentModal({nzTitle:"S\u1EEDa th\xF4ng tin domain"},Ne,o).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}};r.\u0275fac=function(t){return new(t||r)(c(q))},r.\u0275cmp=g({type:r,selectors:[["app-domain-index"]],standalone:!0,features:[v,h],decls:2,vars:3,consts:[["domainTable",""],[4,"ngIf"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzPageIndexChange","nzData","nzTotal","nzPageIndex","nzPageSize"],["colspan","8",1,"center-align"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","T\u1EA1o domain",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngFor","ngForOf"],["alt","",3,"src"],[3,"ngModelChange","ngModel"],["nz-button","","nzType","primary","nzSize","small",1,"mr1",3,"click"],["nz-button","","nzType","primary","nzSize","small",3,"click"]],template:function(t,e){t&1&&(z(0,vt,27,5,"ng-container",1),S(1,"async")),t&2&&i("ngIf",y(1,1,e.domains$))},dependencies:[it,Ze,Je,Qe,tt,Ye,et,X,P,O,B,C,N,I,T,Pe,qe,ae,Ue,w,Ae,$e,ke,Le,We]});let p=r;return p})();export{Pi as DomainIndexComponent};
