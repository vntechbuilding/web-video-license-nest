import{a as N}from"./chunk-6YSGIGXK.js";import{a as He}from"./chunk-FTHBAHA3.js";import{a as De}from"./chunk-SLOIDIPU.js";import{d as oe}from"./chunk-FCOSAHCS.js";import{a as re}from"./chunk-W72PHP5T.js";import{a as xe}from"./chunk-HHG4OQGC.js";import"./chunk-ASNUN4YP.js";import{a as Oe,b as Re}from"./chunk-YANWLB2B.js";import{a as T,b as Ie,d as Q,e as Y,h as ne,j as we,k as Ve,l as Pe,m as Ae,n as Xe,o as Be,p as Ge}from"./chunk-CIAYRUPY.js";import"./chunk-OC6OS4EK.js";import{a as W,b as q,c as k,m as Z,n as j,o as L,p as U,q as $,r as H,t as K}from"./chunk-53LNINAL.js";import"./chunk-PUH3HP37.js";import{d as A,e as c,g as _,h as X,k as Me,l as B,n as G,o as O,r as ye,s as R,t as F,u as b,w as M,x as y}from"./chunk-TEFF5QW5.js";import{Ba as J,E as Te,F as Ne}from"./chunk-E7AKRIK7.js";import"./chunk-SE4MWOQF.js";import"./chunk-3D2PYGCY.js";import{Ea as D,Fa as I,Kb as i,Lb as r,Mb as f,Nb as ge,Ob as he,Qb as le,Sc as Se,Tb as u,Tc as _e,Vb as z,Yb as Ee,Zc as Fe,_c as be,a as ee,b as te,bd as S,cb as ae,cc as ve,dc as m,e as $e,ec as x,gb as a,hb as E,hc as w,ic as V,jc as P,lc as C,pc as ie,qc as Ce,rb as v,rc as pe,ta as h,wb as me,yb as o}from"./chunk-KXMLQHF5.js";var Ze=(()=>{let l=class l extends T(Q,Y){constructor(t){super(),this.templateService=t,this.selectedFile=null}ngOnInit(){this.validateForm=this.fb.group({zipFile:["",[c.required]],name:["",[c.required]],description:["",[c.required]],version:["",[c.required]]})}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0])}submitForm(){if(this.formValid()){let t=new FormData,n=this.removeBlankString(this.validateForm.value);for(let e in n)e!=="zipFile"&&t.append(e,n[e]);this.selectedFile&&t.append("file",this.selectedFile),this.templateService.createTemplate(t).pipe(this.httpErrorOperator("name")).subscribe(e=>{this.destroyModal(e)})}}};l.\u0275fac=function(n){return new(n||l)(E(N))},l.\u0275cmp=h({type:l,selectors:[["app-template-create"]],standalone:!0,features:[v,C],decls:27,vars:36,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","description",3,"nzSm","nzXs"],["nz-input","","formControlName","description","id","description"],["nzRequired","","nzFor","version",3,"nzSm","nzXs"],["nz-input","","formControlName","version","id","version"],["nzRequired","","nzFor","zipFile",3,"nzSm","nzXs"],["type","file","nz-input","","formControlName","zipFile","accept",".zip",3,"change"],[3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","label","defaultField","aspectRatio"],["label","Kh\xF3a giao di\u1EC7n",3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(n,e){n&1&&(i(0,"form",0),u("ngSubmit",function(){return e.submitForm()}),i(1,"nz-form-item")(2,"nz-form-label",1),m(3,"T\xEAn giao di\u1EC7n"),r(),i(4,"nz-form-control",2),f(5,"input",3),r()(),i(6,"nz-form-item")(7,"nz-form-label",4),m(8,"M\xF4 t\u1EA3"),r(),i(9,"nz-form-control",2),f(10,"input",5),r()(),i(11,"nz-form-item")(12,"nz-form-label",6),m(13,"Phi\xEAn b\u1EA3n"),r(),i(14,"nz-form-control",2),f(15,"input",7),r()(),i(16,"nz-form-item")(17,"nz-form-label",8),m(18,"File Zip"),r(),i(19,"nz-form-control",2)(20,"input",9),u("change",function(d){return e.onFileChange(d)}),r()()(),i(21,"app-content-image-input",10),P("formErrorMsgChange",function(d){return V(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),r(),i(22,"app-disabled-input",11),P("formErrorMsgChange",function(d){return V(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),r(),i(23,"nz-form-item",12)(24,"nz-form-control",13)(25,"button",14),m(26,"T\u1EA1o Template"),r()()()()),n&2&&(o("formGroup",e.validateForm),a(2),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.name),a(3),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.description),a(3),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.version),a(3),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.zipFile),a(2),o("validators",e.validators),w("formErrorMsg",e.formErrorMsg),o("formGroup",e.validateForm)("formErrors",e.formErrors)("label","H\xECnh m\xF4 t\u1EA3")("defaultField","image")("aspectRatio",1/5),a(),o("validators",e.validators)("defaultValue",e.defaultValue),w("formErrorMsg",e.formErrorMsg),o("formGroup",e.validateForm)("formErrors",e.formErrors),a(2),o("nzSpan",12)("nzOffset",8),a(),o("disabled",!e.validateForm.valid))},dependencies:[$,q,W,j,Z,U,L,k,y,M,F,b,K,H,R,B,A,_,X,G,O,ne,S,oe,re]});let p=l;return p})();var je=(()=>{let l=class l extends T(Q,Y){constructor(t){super(),this.templateService=t,this.autoImagePath=J.autoImagePath}ngOnInit(){this.defaultValue=this.nzModalData,this.validateForm=this.fb.group({name:[this.nzModalData.name,[c.required]],description:[this.nzModalData.description,[c.required]],version:[this.nzModalData.version,[c.required]]})}submitForm(){this.formValid()&&this.templateService.updateTemplate(te(ee({},this.removeBlankString(this.validateForm.value)),{templateId:this.nzModalData.id})).pipe(this.httpErrorOperator("name")).subscribe(t=>{this.destroyModal(t)})}};l.\u0275fac=function(n){return new(n||l)(E(N))},l.\u0275cmp=h({type:l,selectors:[["app-template-edit"]],standalone:!0,features:[v,C],decls:22,vars:33,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","description",3,"nzSm","nzXs"],["nz-input","","formControlName","description","id","description"],["nzRequired","","nzFor","version",3,"nzSm","nzXs"],["nz-input","","formControlName","version","id","version"],[3,"formErrorMsgChange","uploadContentImageUrl","validators","formErrorMsg","formGroup","formErrors","label","defaultValue","defaultField","aspectRatio"],["label","Kh\xF3a giao di\u1EC7n",3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(n,e){n&1&&(i(0,"form",0),u("ngSubmit",function(){return e.submitForm()}),i(1,"nz-form-item")(2,"nz-form-label",1),m(3,"T\xEAn giao di\u1EC7n"),r(),i(4,"nz-form-control",2),f(5,"input",3),r()(),i(6,"nz-form-item")(7,"nz-form-label",4),m(8,"M\xF4 t\u1EA3"),r(),i(9,"nz-form-control",2),f(10,"input",5),r()(),i(11,"nz-form-item")(12,"nz-form-label",6),m(13,"Phi\xEAn b\u1EA3n"),r(),i(14,"nz-form-control",2),f(15,"input",7),r()(),i(16,"app-content-image-input",8),P("formErrorMsgChange",function(d){return V(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),r(),i(17,"app-disabled-input",9),P("formErrorMsgChange",function(d){return V(e.formErrorMsg,d)||(e.formErrorMsg=d),d}),r(),i(18,"nz-form-item",10)(19,"nz-form-control",11)(20,"button",12),m(21,"C\u1EADp nh\u1EADt Template"),r()()()()),n&2&&(o("formGroup",e.validateForm),a(2),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.name),a(3),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.description),a(3),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.version),a(2),o("uploadContentImageUrl",e.autoImagePath)("validators",e.validators),w("formErrorMsg",e.formErrorMsg),o("formGroup",e.validateForm)("formErrors",e.formErrors)("label","H\xECnh m\xF4 t\u1EA3")("defaultValue",e.defaultValue)("defaultField","image")("aspectRatio",1/5),a(),o("validators",e.validators)("defaultValue",e.defaultValue),w("formErrorMsg",e.formErrorMsg),o("formGroup",e.validateForm)("formErrors",e.formErrors),a(2),o("nzSpan",12)("nzOffset",8),a(),o("disabled",!e.validateForm.valid))},dependencies:[$,q,W,j,Z,U,L,k,y,M,F,b,K,H,R,B,A,_,X,G,O,ne,S,oe,re]});let p=l;return p})();var Ue=$e(He());var Le=(()=>{let l=class l extends T(Q,Y){constructor(t){super(),this.templateService=t,this.autoImagePath=J.autoImagePath,this.selectedFile=null}ngOnInit(){this.defaultValue=this.nzModalData,this.validateForm=this.fb.group({zipFile:["",[c.required]]})}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0])}submitForm(){if(this.formValid()&&this.selectedFile){let t=new FormData;t.append("file",this.selectedFile),t.append("templateId",this.nzModalData.id),this.templateService.updateZip(t).pipe(this.httpErrorOperator("name")).subscribe(n=>{this.destroyModal(n)})}}};l.\u0275fac=function(n){return new(n||l)(E(N))},l.\u0275cmp=h({type:l,selectors:[["app-template-update-zip"]],standalone:!0,features:[v,C],decls:10,vars:9,consts:[["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","zipFile",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["type","file","nz-input","","formControlName","zipFile","accept",".zip",3,"change"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(n,e){n&1&&(i(0,"form",0),u("ngSubmit",function(){return e.submitForm()}),i(1,"nz-form-item")(2,"nz-form-label",1),m(3,"File Zip"),r(),i(4,"nz-form-control",2)(5,"input",3),u("change",function(d){return e.onFileChange(d)}),r()()(),i(6,"nz-form-item",4)(7,"nz-form-control",5)(8,"button",6),m(9,"C\u1EADp nh\u1EADt Zip file"),r()()()()),n&2&&(o("formGroup",e.validateForm),a(2),o("nzSm",10)("nzXs",24),a(2),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.zipFile),a(3),o("nzSpan",12)("nzOffset",8),a(),o("disabled",!e.validateForm.valid))},dependencies:[$,q,W,j,Z,U,L,k,y,M,F,b,K,H,R,B,A,_,X,G,O,S]});let p=l;return p})();function Ke(p,l){if(p&1){let s=le();i(0,"tr")(1,"td"),m(2),ie(3,"date"),r(),i(4,"td"),m(5),ie(6,"date"),r(),i(7,"td"),m(8),r(),i(9,"td"),m(10),r(),i(11,"td"),m(12),r(),i(13,"td"),m(14),r(),i(15,"td")(16,"a",7),f(17,"img",8),r()(),i(18,"td")(19,"nz-switch",9),u("ngModelChange",function(){let n=D(s).$implicit,e=z(2);return I(e.changeDisabled(n,!n.disabled))}),r()(),i(20,"td")(21,"button",10),u("click",function(){let n=D(s).$implicit,e=z(2);return I(e.edit(n))}),m(22,"S\u1EEDa"),r(),i(23,"button",10),u("click",function(){let n=D(s).$implicit,e=z(2);return I(e.updateZip(n))}),m(24,"update Zip"),r(),i(25,"button",11),u("nzOnConfirm",function(){let n=D(s).$implicit,e=z(2);return I(e.delete(n))}),m(26,"X\xF3a"),r()()()}if(p&2){let s=l.$implicit,t=z(2);a(2),x(pe(3,9,s.createdAt,"dd/MM/yyyy hh:mm")),a(3),x(pe(6,12,s.updatedAt,"dd/MM/yyyy hh:mm:ss")),a(3),x(s.name),a(2),x(s.version),a(2),x(s.code),a(2),x(s.description),a(2),Ee("href",t.autoImagePath+s.image,ae),a(),o("src",t.autoImagePath+s.image,ae),a(2),o("ngModel",s.disabled)}}function Je(p,l){if(p&1){let s=le();ge(0),i(1,"nz-table",2,0),u("nzPageIndexChange",function(n){D(s);let e=z();return I(e.changePage(n))}),i(3,"thead")(4,"tr")(5,"th"),m(6,"Th\u01A1\u0300i gian kh\u1EDFi t\u1EA1o"),r(),i(7,"th"),m(8,"C\u1EADp nh\u1EADt"),r(),i(9,"th"),m(10,"Giao di\u1EC7n"),r(),i(11,"th"),m(12,"Version"),r(),i(13,"th"),m(14,"Code"),r(),i(15,"th"),m(16,"Description"),r(),i(17,"th"),m(18,"H\xECnh \u1EA3nh"),r(),i(19,"th"),m(20,"Disabled"),r(),i(21,"th"),m(22,"X\u1EED l\xFD"),r()(),i(23,"tr")(24,"th",3)(25,"button",4),u("click",function(){D(s);let n=z();return I(n.create())}),f(26,"span",5),r()()()(),i(27,"tbody"),me(28,Ke,27,15,"tr",6),r()(),he()}if(p&2){let s=l.ngIf,t=ve(2),n=z();a(),o("nzData",s.data)("nzTotal",s.count)("nzPageIndex",n.pageIndex+1)("nzPageSize",n.pageSize),a(27),o("ngForOf",t.data)}}var ti=(()=>{let l=class l extends T(Ie,De){constructor(t){super(),this.templateService=t,this.autoImagePath=J.autoImagePath,this.template$=this.createObservableData((n,e)=>this.templateService.getAllTemplate(n,e))}create(){this.createComponentModal({nzTitle:"T\u1EA1o template",nzWidth:"100vw"},Ze).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}edit(t){this.createComponentModal({nzTitle:"C\u1EADp nh\u1EADt template "+t.name,nzWidth:"100vw"},je,t).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}delete(t){this.templateService.deleteTemplate(t.id).subscribe(()=>this.loadDataSubject$.next(!0))}changeDisabled(t,n){this.templateService.updateTemplate(te(ee({},(0,Ue.omit)(t,"image")),{templateId:t.id,disabled:n})).subscribe(()=>this.loadDataSubject$.next(!0))}updateZip(t){this.createComponentModal({nzTitle:"C\u1EADp nh\u1EADt Zip template "+t.name},Le,t).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}};l.\u0275fac=function(n){return new(n||l)(E(N))},l.\u0275cmp=h({type:l,selectors:[["app-template-index"]],standalone:!0,features:[v,C],decls:2,vars:3,consts:[["templateTable",""],[4,"ngIf"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzPageIndexChange","nzData","nzTotal","nzPageIndex","nzPageSize"],["colspan","9",1,"center-align"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","T\u1EA1o publisher",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],["alt","image",2,"width","50px",3,"src"],[3,"ngModelChange","ngModel"],["nz-button","","nzType","primary","nzSize","small",1,"mr1",3,"click"],["nz-button","","nzDanger","","nzType","primary","nzSize","small","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this task?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"]],template:function(n,e){n&1&&(me(0,Je,29,5,"ng-container",1),ie(1,"async")),n&2&&o("ngIf",Ce(1,1,e.template$))},dependencies:[Ge,Ae,we,Ve,Be,Pe,Xe,y,M,F,b,S,Se,_e,Fe,be,ye,_,Me,Re,Oe,Ne,Te,xe]});let p=l;return p})();export{ti as TemplateIndexComponent};
