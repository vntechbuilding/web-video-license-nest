import{a as Re}from"./chunk-6IU5STV2.js";import{a as Pe}from"./chunk-AVOTTRO7.js";import{a as Le,b as We}from"./chunk-TKP4QHVZ.js";import{a as Ge}from"./chunk-ON5W3XZ3.js";import{a as Xe,b as Be}from"./chunk-QCY6BLAQ.js";import"./chunk-PSR5DFFY.js";import"./chunk-5TKBH2EH.js";import{d as Ue}from"./chunk-FCOSAHCS.js";import"./chunk-7XZ66E5Q.js";import"./chunk-ASNUN4YP.js";import{b as Ae}from"./chunk-YANWLB2B.js";import{a as P,b as he,d as ye,e as Se,f as De,g as be,h as Me,j as Ne,k as Fe,l as Ve,m as we,n as $e,o as Oe,p as je}from"./chunk-CIAYRUPY.js";import"./chunk-OC6OS4EK.js";import{a as ue,b as _e,c as ge,m as Ce,n as ze,o as Ee,p as Te,q as ve,r as Ie,t as xe}from"./chunk-53LNINAL.js";import"./chunk-PUH3HP37.js";import{d as me,g as le,h as pe,l as ce,n as de,o as fe,s as se,t as U,u as X,w as B,x as G}from"./chunk-TEFF5QW5.js";import{Ba as T}from"./chunk-E7AKRIK7.js";import"./chunk-SE4MWOQF.js";import{b as oe,k as ae,m as re}from"./chunk-3D2PYGCY.js";import{Ea as S,Fa as D,I as Z,Kb as r,Lb as m,Mb as z,Nb as d,Ob as f,Qb as b,Sc as $,Tb as M,Tc as O,Vb as s,Zb as W,Zc as j,a as h,b as N,ba as ee,bb as ie,bd as A,cb as L,dc as c,ec as _,fc as v,gb as n,hb as C,hc as k,ia as te,ic as H,jc as q,lc as w,n as Q,na as ne,pc as I,qc as x,rb as V,ta as F,wb as u,y,yb as o}from"./chunk-KXMLQHF5.js";var R=(()=>{let i=class i{constructor(a){this.http=a}getDomainTemplateConfig(a){return this.http.get(T.apiUrl+`domain-template/${a}`)}createDomainTemplate(a){return this.http.post(T.apiUrl+"domain-template/"+a.dataType.toLowerCase(),a)}};i.\u0275fac=function(p){return new(p||i)(ne(oe))},i.\u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function et(t,i){if(t&1&&(d(0),r(1,"nz-form-item")(2,"nz-form-label",5),c(3),m(),r(4,"nz-form-control",6),z(5,"input",7),m()(),f()),t&2){let e=s();n(2),o("nzSm",10)("nzXs",24),n(),_(e.defaultValue.name),n(),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.content)}}function tt(t,i){if(t&1&&(d(0),r(1,"nz-form-item")(2,"nz-form-label",5),c(3),m(),r(4,"nz-form-control",6),z(5,"textarea",8),m()(),f()),t&2){let e=s();n(2),o("nzSm",10)("nzXs",24),n(),_(e.defaultValue.name),n(),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.content)}}function nt(t,i){if(t&1){let e=b();d(0),r(1,"app-input-ckeditor",9),q("formErrorMsgChange",function(p){S(e);let l=s();return H(l.formErrorMsg,p)||(l.formErrorMsg=p),D(p)}),m(),f()}if(t&2){let e=s();n(),o("validators",e.validators)("defaultValue",e.defaultValue),k("formErrorMsg",e.formErrorMsg),o("formGroup",e.validateForm)("formErrors",e.formErrors)}}function it(t,i){if(t&1){let e=b();d(0),r(1,"app-content-image-input",10),q("formErrorMsgChange",function(p){S(e);let l=s();return H(l.formErrorMsg,p)||(l.formErrorMsg=p),D(p)}),m(),f()}if(t&2){let e=s();n(),o("validators",e.validators),k("formErrorMsg",e.formErrorMsg),o("formGroup",e.validateForm)("formErrors",e.formErrors)("label","H\xECnh \u1EA3nh")("defaultValue",e.defaultValue)("defaultField","content")("aspectRatio",e.defaultValue.config.width/e.defaultValue.config.height)("uploadContentImageUrl",e.uploadTemplateImageUrl)}}function ot(t,i){if(t&1&&z(0,"nz-option",14),t&2){let e=i.$implicit;o("nzValue",e.id)("nzLabel",e.title)}}function at(t,i){if(t&1&&(d(0),u(1,ot,1,2,"nz-option",13),f()),t&2){let e=i.$implicit;n(),o("ngForOf",e.data)}}function rt(t,i){if(t&1&&(d(0),r(1,"nz-form-item")(2,"nz-form-label",11),c(3),m(),r(4,"nz-form-control",6)(5,"nz-select",12),u(6,at,2,1,"ng-container",1),I(7,"async"),m()()(),f()),t&2){let e=s();n(2),o("nzSm",10)("nzXs",24),n(),_(e.defaultValue.name),n(),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.refId),n(2),o("ngIf",x(7,7,e.page$))}}function mt(t,i){if(t&1&&z(0,"nz-option",14),t&2){let e=i.$implicit;o("nzValue",e.id)("nzLabel",e.text)}}function lt(t,i){if(t&1&&(d(0),u(1,mt,1,2,"nz-option",13),f()),t&2){let e=i.$implicit;n(),o("ngForOf",e)}}function pt(t,i){if(t&1&&(d(0),r(1,"nz-form-item")(2,"nz-form-label",11),c(3),m(),r(4,"nz-form-control",6)(5,"nz-select",12),u(6,lt,2,1,"ng-container",1),I(7,"async"),m()()(),f()),t&2){let e=s();n(2),o("nzSm",10)("nzXs",24),n(),_(e.defaultValue.name),n(),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.refId),n(2),o("ngIf",x(7,7,e.menu$))}}function ct(t,i){if(t&1&&z(0,"nz-option",14),t&2){let e=i.$implicit;o("nzValue",e.id)("nzLabel",e.title)}}function dt(t,i){if(t&1&&(d(0),u(1,ct,1,2,"nz-option",13),f()),t&2){let e=i.$implicit;n(),o("ngForOf",e)}}function ft(t,i){if(t&1&&(d(0),r(1,"nz-form-item")(2,"nz-form-label",11),c(3),m(),r(4,"nz-form-control",6)(5,"nz-select",12),u(6,dt,2,1,"ng-container",1),I(7,"async"),m()()(),f()),t&2){let e=s();n(2),o("nzSm",10)("nzXs",24),n(),_(e.defaultValue.name),n(),o("nzSm",14)("nzXs",24)("nzErrorTip",e.formErrors.refId),n(2),o("ngIf",x(7,7,e.newsCategory$))}}var qe=(()=>{let i=class i extends P(ye,Se){constructor(a,p,l,g){super(),this.domainTemplateService=a,this.pageService=p,this.menuService=l,this.newsCategory=g,this.uploadTemplateImageUrl=T.uploadTemplateImageUrl,this.page$=this.pageService.getAllDomainPage(this.nzModalData.domainId,9999,0),this.menu$=this.menuService.getAllDomainMenu(this.nzModalData.domainId).pipe(y(E=>Le(E))),this.newsCategory$=this.newsCategory.allDomainCategory(this.nzModalData.domainId).pipe(y(E=>Xe(E)))}ngOnInit(){this.defaultValue=this.nzModalData,this.validateForm=this.fb.group({refId:[this.nzModalData.refId],content:[this.nzModalData.content]})}submitForm(){this.domainTemplateService.createDomainTemplate(N(h(h({},this.nzModalData),this.removeBlankString(this.validateForm.value)),{domainId:this.nzModalData.domainId})).pipe(this.httpErrorOperator("refId")).subscribe(a=>{this.destroyModal(a)})}};i.\u0275fac=function(p){return new(p||i)(C(R),C(Re),C(We),C(Be))},i.\u0275cmp=F({type:i,selectors:[["app-domain-template-edit"]],standalone:!0,features:[V,w],decls:12,vars:11,consts:[["nz-form","",3,"ngSubmit","formGroup"],[4,"ngIf"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],["nzRequired","","nzFor","content",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","content"],["nz-input","","rows","20","formControlName","content"],["label","N\u1ED9i dung","field","content",3,"formErrorMsgChange","validators","defaultValue","formErrorMsg","formGroup","formErrors"],[3,"formErrorMsgChange","validators","formErrorMsg","formGroup","formErrors","label","defaultValue","defaultField","aspectRatio","uploadContentImageUrl"],["nzRequired","","nzFor","refId",3,"nzSm","nzXs"],["formControlName","refId","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(p,l){p&1&&(r(0,"form",0),M("ngSubmit",function(){return l.submitForm()}),u(1,et,6,6,"ng-container",1)(2,tt,6,6,"ng-container",1)(3,nt,2,5,"ng-container",1)(4,it,2,9,"ng-container",1)(5,rt,8,9,"ng-container",1)(6,pt,8,9,"ng-container",1)(7,ft,8,9,"ng-container",1),r(8,"nz-form-item",2)(9,"nz-form-control",3)(10,"button",4),c(11,"C\u1EADp nh\u1EADt d\u1EEF li\u1EC7u giao di\u1EC7n"),m()()()()),p&2&&(o("formGroup",l.validateForm),n(),o("ngIf",l.defaultValue.dataType==="TEXT"),n(),o("ngIf",l.defaultValue.dataType==="SCRIPT"),n(),o("ngIf",l.defaultValue.dataType==="CONTENT"),n(),o("ngIf",l.defaultValue.dataType==="IMAGE"),n(),o("ngIf",l.defaultValue.dataType==="PAGE"),n(),o("ngIf",l.defaultValue.dataType==="MENU"),n(),o("ngIf",l.defaultValue.dataType==="NEWS_CATEGORY"),n(2),o("nzSpan",12)("nzOffset",8),n(),o("disabled",!l.validateForm.valid))},dependencies:[ve,_e,ue,ze,Ce,Te,Ee,ge,G,B,U,X,xe,Ie,se,ce,me,le,pe,de,fe,Me,De,be,A,$,O,j,Pe,Ue]});let t=i;return t})();function st(t,i){if(t&1&&(d(0),c(1),f()),t&2){let e=s().$implicit;n(),v(" ",e.content," ")}}function ut(t,i){if(t&1&&(d(0),c(1),f()),t&2){let e=s().$implicit;n(),v(" ",e.content," ")}}function _t(t,i){if(t&1&&(d(0),r(1,"a",7),z(2,"img",8),m(),f()),t&2){let e=s().$implicit,a=s(3);n(),W("href","",a.uploadTemplateImageUrl,"",e.content,"",L),n(),W("src","",a.uploadTemplateImageUrl,"",e.content,"",L)}}function gt(t,i){if(t&1&&(d(0),z(1,"div",9),f()),t&2){let e=s().$implicit;n(),o("innerHTML",e.content,ie)}}function Ct(t,i){if(t&1&&(d(0),c(1),f()),t&2){let e=s().$implicit;n(),v(" ",e==null||e.content==null?null:e.content.title," ")}}function zt(t,i){if(t&1&&(d(0),c(1),f()),t&2){let e=s().$implicit;n(),v(" ",e==null||e.content==null?null:e.content.text," ")}}function Et(t,i){if(t&1&&(d(0),c(1),f()),t&2){let e=s().$implicit;n(),v(" ",e==null||e.content==null?null:e.content.title," ")}}function Tt(t,i){if(t&1){let e=b();r(0,"tr")(1,"td"),c(2),m(),r(3,"td"),c(4),m(),r(5,"td"),c(6),m(),r(7,"td"),u(8,st,2,1,"ng-container",2)(9,ut,2,1,"ng-container",2)(10,_t,3,6,"ng-container",2)(11,gt,2,1,"ng-container",2)(12,Ct,2,1,"ng-container",2)(13,zt,2,1,"ng-container",2)(14,Et,2,1,"ng-container",2),m(),r(15,"td")(16,"button",6),M("click",function(){let p=S(e).$implicit,l=s(3);return D(l.edit(p))}),c(17,"S\u1EEDa"),m()()()}if(t&2){let e=i.$implicit;n(2),_(e.name),n(2),_(e.code),n(2),_(e.dataType),n(2),o("ngIf",e.dataType==="TEXT"),n(),o("ngIf",e.dataType==="SCRIPT"),n(),o("ngIf",e.dataType==="IMAGE"),n(),o("ngIf",e.dataType==="CONTENT"),n(),o("ngIf",e.dataType==="PAGE"),n(),o("ngIf",e.dataType==="MENU"),n(),o("ngIf",e.dataType==="NEWS_CATEGORY")}}function vt(t,i){if(t&1&&(d(0),r(1,"div",0)(2,"h3"),c(3),m()(),r(4,"div",4)(5,"nz-table",5)(6,"thead")(7,"tr")(8,"th"),c(9,"C\u1EA5u h\xECnh"),m(),r(10,"th"),c(11,"Code"),m(),r(12,"th"),c(13,"Lo\u1EA1i d\u1EEF li\u1EC7u"),m(),r(14,"th"),c(15,"Data"),m(),r(16,"th"),c(17,"X\u1EED l\xFD"),m()()(),r(18,"tbody"),u(19,Tt,18,10,"tr",3),m()()(),f()),t&2){let e=i.$implicit;n(3),_(e.templateType),n(2),o("nzData",e.config),n(14),o("ngForOf",e.config)}}function It(t,i){if(t&1&&(d(0),u(1,vt,20,3,"ng-container",3),f()),t&2){let e=i.$implicit;n(),o("ngForOf",e)}}var cn=(()=>{let i=class i extends P(he){ngOnInit(){this.routerSubscription=this.aRouter.params.subscribe(a=>{a&&a.domainId&&this.domainId!==a.domainId&&(this.domainId=a.domainId,this.filterData={userId:"",domainId:a.domainId},this.loadDataSubject$.next(a.domainId))})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}constructor(a,p,l){super(),this.domainTemplateService=a,this.aRouter=p,this.router=l,this.loadDataSubject$=new Q(""),this.loadData$=this.loadDataSubject$.asObservable(),this.config$=this.loadData$.pipe(Z(g=>!!g),ee(g=>this.domainTemplateService.getDomainTemplateConfig(g)),y(g=>{let E=[];for(let Y of Object.keys(g)){let K=[],J=g[Y];if(J!==null)for(let Ye of Object.values(J))K.push(Ye);E.push({templateType:Y,config:K})}return E})),this.uploadTemplateImageUrl=T.uploadTemplateImageUrl}filter(a){a.domainId&&a.domainId!==this.domainId&&this.router.navigate(["/domain-template",a.domainId]).then()}edit(a){this.createComponentModal({nzTitle:"Ch\u1EC9nh s\u1EEDa c\u1EA5u h\xECnh "+a.name,nzWidth:"90vw"},qe,N(h({},a),{domainId:this.filterData.domainId})).afterClose.subscribe(()=>this.loadDataSubject$.next(this.filterData.domainId))}};i.\u0275fac=function(p){return new(p||i)(C(R),C(ae),C(re))},i.\u0275cmp=F({type:i,selectors:[["app-domain-template-index"]],standalone:!0,features:[V,w],decls:4,vars:5,consts:[[1,"mb-2"],[3,"filter","domainInput","domainId"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mb-3"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzData"],["nz-button","","nzType","primary","nzSize","small",1,"mr1",3,"click"],["target","_blank",3,"href"],["alt","",2,"width","50px",3,"src"],[3,"innerHTML"]],template:function(p,l){p&1&&(r(0,"div",0)(1,"app-user-domain-filter",1),M("filter",function(E){return l.filter(E)}),m()(),u(2,It,2,1,"ng-container",2),I(3,"async")),p&2&&(n(),o("domainInput",!0)("domainId",l.domainId),n(),o("ngIf",x(3,3,l.config$)))},dependencies:[Ge,A,$,O,j,G,B,U,X,Ae,je,we,Ne,Fe,Oe,Ve,$e]});let t=i;return t})();export{cn as DomainTemplateIndexComponent};
