import{a as ne,b as oe}from"./chunk-QCY6BLAQ.js";import{a as J}from"./chunk-5TKBH2EH.js";import{a as te}from"./chunk-7XZ66E5Q.js";import{a as ie}from"./chunk-ASNUN4YP.js";import{d as ee,f as x,g as j,h as P}from"./chunk-CIAYRUPY.js";import{a as T,b as G,c as U,m as X,n as Z,o as L,p as A,q as B,t as R}from"./chunk-53LNINAL.js";import{a as W,g as E,h as $,l as Y,n as O,o as V,s as M}from"./chunk-TEFF5QW5.js";import{Kb as p,Lb as l,Ma as v,Mb as f,N as H,Nb as c,Ob as z,Sc as F,Tc as w,Zc as D,ba as I,bd as b,dc as g,gb as r,ha as K,hb as u,kc as Q,lc as _,o as y,pc as C,qc as h,rb as N,ta as S,u as k,wb as s,y as q,yb as t}from"./chunk-KXMLQHF5.js";function ue(e,i){if(e&1&&f(0,"nz-option",11),e&2){let o=i.$implicit;t("nzValue",o.id)("nzLabel",o.fullName+" "+o.email+" "+o.phone)}}function fe(e,i){if(e&1&&(c(0),s(1,ue,1,2,"nz-option",10),z()),e&2){let o=i.$implicit;r(),t("ngForOf",o.data)}}function ce(e,i){if(e&1&&f(0,"nz-option",11),e&2){let o=i.$implicit;t("nzValue",o.id)("nzLabel",o.domain)}}function ze(e,i){if(e&1&&(c(0),s(1,ce,1,2,"nz-option",10),z()),e&2){let o=i.$implicit;r(),t("ngForOf",o)}}function ge(e,i){if(e&1&&f(0,"nz-option",11),e&2){let o=i.$implicit;t("nzValue",o.id)("nzLabel",o.title)}}function Ce(e,i){if(e&1&&(c(0),s(1,ge,1,2,"nz-option",10),z()),e&2){let o=i.$implicit;r(),t("ngForOf",o)}}var Te=(()=>{let i=class i extends ee{constructor(a,n,m){super(),this.user=a,this.domain=n,this.newsCategory=m,this.filter=new v,this.user$=this.user.getAllUser(1e3),this.loadDomain$=new y,this.domain$=this.loadDomain$.pipe(I(d=>(this.validateForm.get("domainId")?.setValue(""),d?this.domain.allUserDomain(d):k([])))),this.loadNewsCategory$=new y,this.newsCategory$=this.loadNewsCategory$.pipe(I(d=>(this.validateForm.get("categoryId")?.setValue(""),d?this.newsCategory.allDomainCategory(d):k([]))),q(d=>this.flattenCategories(d))),this.flattenCategories=ne}ngOnInit(){this.validateForm=this.fb.group({domainId:[""],userId:[""],categoryId:[""]});let a;this.valueSubscription=this.validateForm.valueChanges.pipe(H(500)).subscribe(n=>{JSON.stringify(n)!==JSON.stringify(a)&&((!a||a.userId!==n.userId)&&this.loadDomain$.next(n.userId),(!a||a.domainId!==n.domainId)&&this.loadNewsCategory$.next(n.domainId),a=n,this.filter.next(n))}),this.defaultValue.userId&&this.loadDomain$.next(this.defaultValue.userId),this.defaultValue.domainId&&this.loadNewsCategory$.next(this.defaultValue.domainId)}ngOnDestroy(){super.ngOnDestroy(),this.valueSubscription&&this.valueSubscription.unsubscribe()}};i.\u0275fac=function(n){return new(n||i)(u(te),u(J),u(oe))},i.\u0275cmp=S({type:i,selectors:[["app-user-domain-news-category-filter"]],outputs:{filter:"filter"},standalone:!0,features:[N,_],decls:26,vars:25,consts:[["nz-form","",3,"formGroup"],["nz-row","","nzGutter","20"],["nz-col","","nzSpan","8"],["nzFor","userId",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["formControlName","userId","nzShowSearch","","nzAllowClear",""],[4,"ngIf"],["nzFor","domainId",3,"nzSm","nzXs"],["formControlName","domainId","nzShowSearch","","nzAllowClear",""],["formControlName","categoryId","nzShowSearch","","nzAllowClear",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(n,m){n&1&&(p(0,"form",0)(1,"div",1)(2,"div",2)(3,"nz-form-item")(4,"nz-form-label",3),g(5,"User"),l(),p(6,"nz-form-control",4)(7,"nz-select",5),s(8,fe,2,1,"ng-container",6),C(9,"async"),l()()()(),p(10,"div",2)(11,"nz-form-item")(12,"nz-form-label",7),g(13,"Domain"),l(),p(14,"nz-form-control",4)(15,"nz-select",8),s(16,ze,2,1,"ng-container",6),C(17,"async"),l()()()(),p(18,"div",2)(19,"nz-form-item")(20,"nz-form-label",7),g(21,"Danh m\u1EE5c"),l(),p(22,"nz-form-control",4)(23,"nz-select",9),s(24,Ce,2,1,"ng-container",6),C(25,"async"),l()()()()()()),n&2&&(t("formGroup",m.validateForm),r(4),t("nzSm",10)("nzXs",24),r(2),t("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.userId),r(2),t("ngIf",h(9,19,m.user$)),r(4),t("nzSm",10)("nzXs",24),r(2),t("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.domainId),r(2),t("ngIf",h(17,21,m.domain$)),r(4),t("nzSm",10)("nzXs",24),r(2),t("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.categoryId),r(2),t("ngIf",h(25,23,m.newsCategory$)))},dependencies:[B,G,T,Z,X,A,L,U,R,M,Y,E,$,O,V,P,x,j,b,F,w,D]});let e=i;return e})();function he(e,i){if(e&1&&f(0,"nz-option",6),e&2){let o=i.$implicit;t("nzValue",o.id)("nzLabel",o.domain)}}function ye(e,i){if(e&1&&(c(0),s(1,he,1,2,"nz-option",5),z()),e&2){let o=i.$implicit;r(),t("ngForOf",o)}}var He=(()=>{let i=class i extends ie{constructor(a){super(),this.domainService=a,this.loadData$=new y,this.domain$=this.loadData$.pipe(I(n=>n?this.domainService.allUserDomain(n):[])),this.domainId=new v,this.allowClear=!1}ngOnInit(){this.addControl("domainId",this.validators.domainId,this.defaultValue.domainId),this.defaultValue.userId&&this.loadData$.next(this.defaultValue.userId),this.domainIdSubscription=this.formGroup.get("domainId")?.valueChanges.subscribe(a=>this.domainId.emit(a)),this.userIdSubscription=this.formGroup.get("userId")?.valueChanges.subscribe(a=>{this.loadData$.next(a)})}ngOnDestroy(){this.domainIdSubscription&&this.domainIdSubscription.unsubscribe(),this.userIdSubscription&&this.userIdSubscription.unsubscribe()}};i.\u0275fac=function(n){return new(n||i)(u(J))},i.\u0275cmp=S({type:i,selectors:[["app-domain-input-by-user"]],inputs:{allowClear:"allowClear"},outputs:{domainId:"domainId"},standalone:!0,features:[Q([{provide:W,useExisting:K(()=>i),multi:!0}]),N,_],decls:8,vars:10,consts:[[3,"formGroup"],["nzFor","domainId",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["formControlName","domainId","nzShowSearch","",3,"nzAllowClear"],[4,"ngIf"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(n,m){n&1&&(p(0,"div",0)(1,"nz-form-item")(2,"nz-form-label",1),g(3,"Domain"),l(),p(4,"nz-form-control",2)(5,"nz-select",3),s(6,ye,2,1,"ng-container",4),C(7,"async"),l()()()()),n&2&&(t("formGroup",m.formGroup),r(2),t("nzSm",10)("nzXs",24),r(2),t("nzSm",14)("nzXs",24)("nzErrorTip",m.formErrors.domainId),r(),t("nzAllowClear",m.allowClear),r(),t("ngIf",h(7,8,m.domain$)))},dependencies:[B,G,T,X,A,L,P,x,j,U,M,E,$,O,V,R,b,F,w,D]});let e=i;return e})();export{Te as a,He as b};
